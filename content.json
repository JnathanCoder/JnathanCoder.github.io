[{"title":"css-border-animation","date":"2021-01-19T02:11:11.000Z","path":"2021/01/19/css-border-animation/","text":"Hover Me 1&lt;div class=\"css-border1\"&gt;Hover Me&lt;/div&gt; 123456789101112131415161718192021.css-border1 &#123; width: 100px; height: 100px; line-height: 100px; text-align: center; cursor: pointer; background: linear-gradient(to right, currentColor 50%, transparent 50%) repeat-x, linear-gradient(to right, currentColor 50%, transparent 50%) repeat-x, linear-gradient(to bottom, currentColor 50%, transparent 50%) repeat-y, linear-gradient(to bottom, currentColor 50%, transparent 50%) repeat-y; background-size: 5px 1px, 5px 1px, 1px 5px, 1px 5px; background-position: 0 0, 0 100%, 0 0, 100% 0;&#125;.css-border1:hover &#123; animation: animation1 .1s linear infinite;&#125;@keyframes animation1 &#123; 100% &#123; background-position: 5px 0, -5px 100%, 0 -5px, 100% 5px; &#125;&#125; åˆ©ç”¨æ¸å˜+ä¼ªå…ƒç´ ç”»å‡ºæ¥å››å—èƒŒæ™¯å›¾å½¢ 1&lt;div class=\"border-wrapper2\"&gt;&lt;div class=\"css-border2\"&gt;&lt;/div&gt;&lt;/div&gt; 123456789101112131415161718192021222324252627.border-wrapper2 &#123; width: 100px; height: 100px; overflow: hidden; position: relative; border-radius: 10px;&#125;.css-border2 &#123; width: 100px; height: 100px; position: relative;&#125;.css-border2:after &#123; content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background-image: linear-gradient(#399953, #399953), linear-gradient(#fbb300, #fbb300), linear-gradient(#d53e33, #d53e33), linear-gradient(#377af5, #377af5); background-size: 50% 50%; background-position: 0 0, 100% 0, 100% 100%, 0 100%; background-repeat: no-repeat;&#125; åœ¨ä¸Šå›¾åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šé®ç½©ç›–æ‰å¤šä½™çš„éƒ¨åˆ†ï¼Œå¹¶åŠ ä¸Šæ—‹è½¬ codepenç¤ºä¾‹ 1&lt;div class=\"border-wrapper3\"&gt;&lt;div class=\"css-border3\"&gt;&lt;/div&gt;&lt;/div&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142.border-wrapper3 &#123; width: 100px; height: 100px; overflow: hidden; position: relative; border-radius: 10px;&#125;.border-wrapper3:before &#123; content: ''; position: absolute; z-index: 10; top: 2px; bottom: 2px; left: 2px; right: 2px; background: #fff; border-radius: 10px;&#125;.css-border3 &#123; width: 100px; height: 100px; animation: animation2 2s linear infinite; position: relative;&#125;.css-border3:after &#123; content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background-image: linear-gradient(#399953, #399953), linear-gradient(#fbb300, #fbb300), linear-gradient(#d53e33, #d53e33), linear-gradient(#377af5, #377af5); background-size: 50% 50%; background-position: 0 0, 100% 0, 100% 100%, 0 100%; background-repeat: no-repeat;&#125;@keyframes animation2 &#123; 100% &#123; transform: rotate(1turn); &#125;&#125; conic-gradient è§’å‘(åœ†é”¥)æ¸å˜ (edgeâ‰¥79æ”¯æŒ) codepenç¤ºä¾‹ conic-gradient é¥¼å›¾ (æ€ä¹ˆæ„Ÿè§‰æœ‰ç§opacityçš„æ•ˆæœğŸ˜¶) é‡å¤åœ†é”¥æ¸å˜ç»˜åˆ¶æŠ½å¥–åœ†ç›˜ codepenç¤ºä¾‹ åœ†é”¥æ¸å˜ç»˜åˆ¶ä¿¡å°æ•ˆæœ codepenç¤ºä¾‹","comments":true,"tags":[{"name":"css","slug":"css","permalink":"https://JnathanCoder.github.io/tags/css/"},{"name":"border","slug":"border","permalink":"https://JnathanCoder.github.io/tags/border/"}]},{"title":"css å¸¸è§å›¾å½¢","date":"2020-12-26T13:49:45.000Z","path":"2020/12/26/css-custom-shape/","text":"1. ä¸‰è§’å½¢1.1 ä¸Šä¸‰è§’ 1&lt;div class=\"up-triangle\"&gt;&lt;/div&gt; 1234567.up-triangle &#123; display: inline-block; width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-bottom: 20px solid #00bebe;&#125; 1.2 ä¸‹ä¸‰è§’ 1234567.down-triangle &#123; display: inline-block; width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 20px solid #00bebe;&#125; 1&lt;div class=\"down-triangle\"&gt;&lt;/div&gt; 1.3 å·¦ä¸‰è§’ 1234567.left-triangle &#123; display: inline-block; width: 0; height: 0; border-top: 20px solid transparent; border-bottom: 20px solid transparent; border-right: 20px solid #00bebe;&#125; 1&lt;div class=\"left-triangle\"&gt;&lt;/div&gt; 1.4 å³ä¸‰è§’ 1234567.right-triangle &#123; display: inline-block; width: 0; height: 0; border-top: 20px solid transparent; border-bottom: 20px solid transparent; border-left: 20px solid #00bebe;&#125; 1&lt;div class=\"right-triangle\"&gt;&lt;/div&gt; 1.5 å¸¦çº¿æ¡†çš„ä¸‰è§’å½¢1.5.1 ä¸¤ä¸ªä¸‰è§’å½¢å åŠ  è°·æ­Œç¿»è¯‘ä½¿ç”¨çš„æ–¹æ³•è¿™æ˜¯å¯¹è¯å†…å®¹ 1234567891011121314151617181920212223242526272829.custom-speaking1 &#123; display: inline-block; padding: 10px; border: 1px solid #00bebe; filter: drop-shadow(); position: relative;&#125;.custom-triangle1 &#123; position: absolute; top: -11px; left: 30px;&#125;.custom-triangle1:before &#123; content: ''; position: absolute; left: -11px; border-left: 11px solid transparent; border-right: 11px solid transparent; border-bottom: 11px solid #00bebe;&#125;.custom-triangle1:after &#123; content: ''; position: absolute; left: -10px; top: 1px; border-left: 10px solid transparent; border-right: 10px solid transparent; border-bottom: 10px solid #fff;&#125; 1234&lt;div class=\"custom-speaking1\"&gt; &lt;div&gt;è¿™æ˜¯å¯¹è¯å†…å®¹&lt;/div&gt; &lt;div class=\"custom-triangle1\"&gt;&lt;/div&gt;&lt;/div&gt; 1.5.2 å¤šé‡æ¸å˜èƒŒæ™¯æ­£æ–¹å½¢+æ—‹è½¬ æ¥æºDemoè¿™æ˜¯å¯¹è¯å†…å®¹ 123456789101112131415.custom-speaking2 &#123; display: inline-block; padding: 10px; border: 1px solid #00bebe; position: relative;&#125;.custom-speaking2:before&#123; content: ''; position: absolute; top: 16px; left: -6px; width: 10px; height: 10px; background: linear-gradient(to top, blue, blue) no-repeat, linear-gradient(to right, green, green) no-repeat, linear-gradient(to right bottom, #fff, #fff 10px, rgba(0, 0, 0, 0) 10px) no-repeat; background-size: 10px 1px, 1px 10px, 10px 10px; transform: rotate(-45deg);&#125; 1&lt;div class=\"custom-speaking2\"&gt;è¿™æ˜¯å¯¹è¯å†…å®¹&lt;/div&gt; transparent 10px â†’ rgba(0, 0, 0, 0) 10pxï¼Œæ–°å‡çº§Firefoxä¸‹transparentè¾¹ç¼˜ä¼šæœ‰ç°è‰²èƒŒæ™¯æ¸²æŸ“bugï¼Œä½¿ç”¨rgbaæˆ–hslaç™½è‰²é€æ˜è¡¨ç¤ºå¯ä¿®å¤ã€‚ 2. æ¯”ä¾‹å¯æ§åˆ¶çš„è™šçº¿ 1:1 3:71234567891011121314.dashed-line1 &#123; display: inline-block; width: 200px; height: 1px; background: linear-gradient(to right, black, black 5px, transparent 5px, transparent); background-size: 10px 1px;&#125;.dashed-line2 &#123; display: inline-block; width: 200px; height: 1px; background: linear-gradient(to right, black, black 3px, transparent 3px, transparent); background-size: 10px 1px;&#125;12&lt;div class=\"dashed-line1\"&gt;&lt;/div&gt;&lt;div class=\"dashed-line2\"&gt;&lt;/div&gt;### 3. åŠ å·å‡å·&emsp; 12345678910111213141516171819202122.custom-minus &#123; display: inline-block; width: 30px; height: 30px; border-radius: 3px; background: linear-gradient(to right, currentColor, currentColor); background-color: #f0f1f2; background-position: center; background-size: 15px 2px; background-repeat: no-repeat;&#125;.custom-plus &#123; display: inline-block; width: 30px; height: 30px; border-radius: 3px; background: linear-gradient(to right, currentColor, currentColor); background-color: #f0f1f2; background-position: center; background-size: 15px 2px; background-repeat: no-repeat;&#125; 12&lt;div class=\"custom-minus\"&gt;&lt;/div&gt;&lt;div class=\"custom-plus\"&gt;&lt;/div&gt;","comments":true,"tags":[{"name":"css","slug":"css","permalink":"https://JnathanCoder.github.io/tags/css/"}]},{"title":"å‰ç«¯ä¼˜åŒ–ä¹‹Preç›¸å…³æœ¯è¯­","date":"2020-09-09T06:00:56.000Z","path":"2020/09/09/preload-prefetch-async-defer/","text":"DNS prefetchç”¨äºå‘ŠçŸ¥æµè§ˆå™¨é¢„å…ˆè·å–æŒ‡å®šçš„åŸŸåçš„DNSï¼Œä»¥ä¾¿åœ¨ä½¿ç”¨æ—¶å¯ä»¥å‡å°‘DNSæŸ¥æ‰¾ã€‚ 1&lt;link rel=\"dns-prefetch\" href=\"//the-domain-to-be-prefetched.com\" /&gt; preconnect é¢„è¿æ¥é¢„è¿æ¥ã€‚å’ŒDNS Prefetchç±»ä¼¼ï¼Œä½†æ˜¯ï¼Œæ›´è¿›ä¸€æ­¥ã€‚å®ƒä¸ä»…è¦æ±‚æµè§ˆå™¨é¢„è§£ææŒ‡å®šåŸŸåçš„DNSï¼Œè¿˜éœ€è¦é¢„å…ˆä¸æœåŠ¡å™¨æ¡æ‰‹ä»¥åŠTLSåå•†ï¼ˆå¦‚æœä½¿ç”¨äº†HTTPSï¼‰ã€‚ 1&lt;link rel=\"preconnect\" href=\"//the-domain-to-be-preconnect.com\" crossorigin=\"anonymous\" /&gt; preload é¢„åŠ è½½ link å…ƒç´ çš„ rel å±æ€§çš„å±æ€§å€¼ preload èƒ½å¤Ÿè®©ä½ åœ¨ä½ çš„HTMLé¡µé¢ä¸­ head å…ƒç´ å†…éƒ¨ä¹¦å†™ä¸€äº›å£°æ˜å¼çš„èµ„æºè·å–è¯·æ±‚ï¼Œå¯ä»¥æŒ‡æ˜å“ªäº›èµ„æºæ˜¯åœ¨é¡µé¢åŠ è½½å®Œæˆåå³åˆ»éœ€è¦çš„ã€‚å¯¹äºè¿™ç§å³åˆ»éœ€è¦çš„èµ„æºï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨é¡µé¢åŠ è½½çš„ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸé˜¶æ®µå°±å¼€å§‹è·å–ï¼Œåœ¨æµè§ˆå™¨çš„ä¸»æ¸²æŸ“æœºåˆ¶ä»‹å…¥å‰å°±è¿›è¡Œé¢„åŠ è½½ã€‚è¿™ä¸€æœºåˆ¶ä½¿å¾—èµ„æºå¯ä»¥æ›´æ—©çš„å¾—åˆ°åŠ è½½å¹¶å¯ç”¨ï¼Œä¸”æ›´ä¸æ˜“é˜»å¡é¡µé¢çš„åˆæ­¥æ¸²æŸ“ï¼Œè¿›è€Œæå‡æ€§èƒ½ã€‚ preload çš„èµ„æºä¼šè¢«ä¼˜å…ˆåŠ è½½ï¼Œä½†ä¸ä¼šé˜»å¡doumentçš„æ¸²æŸ“ä»¥åŠé¡µé¢çš„onloadäº‹ä»¶ã€‚ä¸€èˆ¬ç”¨äºå¯¹é¡µé¢å¾ˆé‡è¦çš„èµ„æºä¸Šï¼Œæ¯”å¦‚ å­—ä½“æ–‡ä»¶ã€‚å¦‚æœé¢„åŠ è½½è¿›æ¥çš„èµ„æºåœ¨3så†…æ²¡æœ‰ä½¿ç”¨ï¼Œæµè§ˆå™¨ä¼šåœ¨æ§åˆ¶å°æ‰“å°è­¦å‘Šä¿¡æ¯ã€‚ preloadæœ‰è®¸å¤šå¥½å¤„ï¼š æ›´ç²¾ç¡®åœ°ä¼˜åŒ–èµ„æºåŠ è½½ä¼˜å…ˆçº§ã€‚ åŒ¹é…æœªæ¥çš„åŠ è½½éœ€æ±‚ï¼Œåœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œé‡å¤åˆ©ç”¨åŒä¸€èµ„æºã€‚ ä¸ºèµ„æºåº”ç”¨æ­£ç¡®çš„å†…å®¹å®‰å…¨ç­–ç•¥ã€‚ ä¸ºèµ„æºè®¾ç½®æ­£ç¡®çš„ Accept è¯·æ±‚å¤´ã€‚ é¢„ prefetch çš„åŒºåˆ« Prefetchçš„ä¼˜å…ˆçº§å¾ˆä½ï¼Œä½åˆ°æµè§ˆå™¨å¯ä»¥ä¸åŠ è½½ Preloadçš„ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œæµè§ˆå™¨ä¸€å®šè¦åŠ è½½ PreloadåŠ è½½çš„èµ„æºç”¨äºå½“å‰é¡µé¢ä¸­ PrefetchåŠ è½½çš„èµ„æºç”¨äºå°†æ¥æŸä¸ªé¡µé¢ä¸­ï¼ˆè¿™æ„å‘³ç€å®ƒå¯èƒ½å‹æ ¹ä¸ä¼šè¢«ç”¨åˆ°ï¼‰ æŒ‡å®šèµ„æºç±»å‹ asæŒ‡å®šè¢«é¢„åŠ è½½èµ„æºçš„ç±»å‹ã€‚aså±æ€§å€¼ä¸ºcss/scriptæ—¶ï¼Œä¼˜å…ˆçº§å¾ˆé«˜ã€‚ è·¨åŸŸè·å– crossOriginå¦‚éœ€åŠ è½½è·¨åŸŸçš„èµ„æºåˆ—è¡¨ï¼Œåˆ™éœ€è¦æ­£ç¡®è®¾ç½®CORSï¼Œæ¥ç€ä¾¿å¯ä»¥åœ¨ link å…ƒç´ ä¸­è®¾ç½®å¥½crossoriginå±æ€§å³å¯ã€‚(ç”±äºå†å²åŸå› ï¼ŒåŠ è½½å­—ä½“æ—¶ï¼Œæ— è®ºæœ‰æ²¡æœ‰è·¨åŸŸï¼Œéƒ½éœ€è¦æ·»åŠ crossOrigin) 1&lt;link rel=\"preload\" as=\"font\" type=\"font/woff2\" href=\"path/to/font\" crossOrigin&gt; åŒ…å«åª’ä½“ medialink å…ƒç´ æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ç‰¹æ€§æ˜¯å®ƒä»¬èƒ½å¤Ÿæ¥å—ä¸€ä¸ªmediaå±æ€§ã€‚å®ƒä»¬å¯ä»¥æ¥å—åª’ä½“ç±»å‹æˆ–æœ‰æ•ˆçš„åª’ä½“æŸ¥è¯¢ä½œä¸ºå±æ€§å€¼ï¼Œè¿™å°†ä»¤ä½ èƒ½å¤Ÿä½¿ç”¨å“åº”å¼çš„é¢„åŠ è½½ï¼ 12&lt;link rel=\"preload\" href=\"bg-image-narrow.png\" as=\"image\" media=\"(max-width: 600px)\"&gt;&lt;link rel=\"preload\" href=\"bg-image-wide.png\" as=\"image\" media=\"(min-width: 601px)\"&gt; 12345678var mediaQueryList = window.matchMedia(\"(max-width: 600px)\");var header = document.querySelector('header');if(mediaQueryList.matches) &#123; header.style.backgroundImage = 'url(bg-image-narrow.png)';&#125; else &#123; header.style.backgroundImage = 'url(bg-image-wide.png)';&#125; è„šæœ¬åŒ–é¢„åŠ è½½é¢„åŠ è½½ 12345var preloadLink = document.createElement(\"link\");preloadLink.href = \"myscript.js\";preloadLink.rel = \"preload\";preloadLink.as = \"script\";document.head.appendChild(preloadLink); æ‰§è¡Œ 123var preloadedScript = document.createElement(\"script\");preloadedScript.src = \"myscript.js\";document.body.appendChild(preloadedScript); prefetch é¢„è·å–å…³é”®å­— prefetch ä½œä¸ºå…ƒç´  link çš„å±æ€§ rel çš„å€¼ï¼Œæ˜¯ä¸ºäº†æç¤ºæµè§ˆå™¨ï¼Œç”¨æˆ·æœªæ¥çš„æµè§ˆæœ‰å¯èƒ½éœ€è¦åŠ è½½ç›®æ ‡èµ„æºï¼Œæ‰€ä»¥æµè§ˆå™¨æœ‰å¯èƒ½é€šè¿‡äº‹å…ˆè·å–å’Œç¼“å­˜å¯¹åº”èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ prerender é¢„æ¸²æŸ“ ä¸Prefetchç±»ä¼¼ï¼Œæµè§ˆå™¨ä¼šä¸‹è½½æ•´ä¸ªèµ„æºï¼Œä½†æ˜¯ï¼ŒPrefetchä¸å…è®¸æµè§ˆå™¨å¯¹èµ„æºåšé¢„å¤„ç†å’Œæ‰§è¡Œï¼Œè€ŒPrerenderåˆ™ä¼šå‘ŠçŸ¥æµè§ˆå™¨ï¼Œä¸‹è½½èµ„æºï¼ˆHTMLï¼‰å¹¶è§£æ/æ‰§è¡Œå®ƒï¼ŒåŒ…æ‹¬è¢«è§£æèµ„æºçš„å­èµ„æºï¼Œè¿™æ„å‘³ç€ä¼šä¸‹è½½è¯¥HTMLä¸­çš„å›¾ç‰‡ã€æ ·å¼ã€è„šæœ¬ç­‰ç­‰ã€‚Prerenderæ²¡æœ‰aså±æ€§ï¼Œå®ƒä¸‹è½½çš„æ˜¯HTML 1&lt;link rel=\"prerender\" href=\"//the-domain-to-be-preconnect.com\" /&gt; subresourceæŒ‡å®šé¢„åŠ è½½èµ„æºæ‹¥æœ‰åŠ è½½çš„æœ€é«˜ä¼˜å…ˆçº§ script defer1&lt;script src=\"path/to/script.js\" defer&gt;&lt;/script&gt; åŠ è½½åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹ä¸ script.js çš„åŠ è½½å¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ï¼Œä½†æ˜¯ script.js çš„æ‰§è¡Œè¦ç­‰åˆ°æ‰€æœ‰æ–‡æ¡£å…ƒç´ åŠ è½½å’Œè§£æä¹‹åï¼Œåœ¨ DOMContentLoaded ä¹‹å‰æ‰§è¡Œã€‚ script async1&lt;script src=\"path/to/script.js\" async&gt;&lt;/script&gt; åŠ è½½åç»­æ–‡æ¡£å…ƒç´ çš„è¿‡ç¨‹ä¸ script.js çš„åŠ è½½ä»¥åŠæ‰§è¡Œéƒ½å¹¶è¡Œè¿›è¡Œï¼ˆå¼‚æ­¥ï¼‰ã€‚ script1&lt;script src=\"path/to/script.js\"&gt;&lt;/script&gt; æµè§ˆå™¨ä¼šç«‹å³åŠ è½½å¹¶æ‰§è¡Œ script.js. ç«‹å³ æŒ‡çš„æ˜¯åœ¨æ¸²æŸ“scriptæ ‡ç­¾ä¹‹åï¼ˆä¸‹ï¼‰çš„æ–‡æ¡£å…ƒç´ ä¹‹å‰ï¼Œä¸ç­‰å¾…æ ‡ç­¾ä¹‹åçš„æ–‡æ¡£å…ƒç´ è½½å…¥ï¼Œè¯»åˆ°äº†å°±å¼€å§‹åŠ è½½å¹¶æ‰§è¡Œã€‚ é™„ä¸‰ç§æƒ…å½¢ä¸‹çš„å›¾ç¤ºï¼ˆ å›¾ç‰‡æ¥æºï¼‰ ES Moduleè¯¦æƒ…å‚è€ƒ èµ„æ–™ MDN å‰ç«¯æ¨¡å—åŒ–çš„ä»Šç”Ÿ","comments":true,"tags":[{"name":"å‰ç«¯ä¼˜åŒ–","slug":"å‰ç«¯ä¼˜åŒ–","permalink":"https://JnathanCoder.github.io/tags/å‰ç«¯ä¼˜åŒ–/"}]},{"title":"defineproperty-proxy","date":"2020-08-31T08:25:17.000Z","path":"2020/08/31/defineproperty-proxy/","text":"åœ¨ä¸€ç¯‡ æ˜é‡‘æ–‡ç«  ä¸­çœ‹åˆ°è¿™æ ·ä¸€é“é¢˜ç›®ï¼Œå¤§æ¦‚æ˜¯ä»¥ä¸‹çš„éœ€æ±‚ã€‚ è¡¥å…¨Observeå‡½æ•°ï¼Œä½¿å¾—æ‰§è¡Œ proxyObj.name = &#39;å¤§å¤§&#39; æ—¶ï¼Œæ‰“å° å±æ€§[name]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¤§å¤§]ã€‚ 1234567891011function Observe(obj, callback) &#123; // TO DO&#125;let oldObj = &#123; name: 'å°å°', uid: 108&#125;const proxyObj = Observe(oldObj, (key, value) =&gt; &#123; console.log(`å±æ€§[$&#123;key&#125;]çš„å€¼è¢«ä¿®æ”¹ä¸º[$&#123;value&#125;]`)&#125;) 1. Object.defineProperty1234567891011121314151617181920212223242526272829303132333435363738function Observe(obj, callback) &#123; const observedObj = &#123;&#125; Object.keys(obj).forEach( (key) =&gt; &#123; Object.defineProperty(observedObj, key, &#123; configurable: true, enumerable: true, get: () =&gt; &#123; console.log('emit getter', key) return obj[key] &#125;, set: (newVal) =&gt; &#123; console.log('emit setter', key) obj[key] = newVal callback(key, newVal) &#125; &#125;) &#125;) return observedObj&#125;let oldObj = &#123; name: 'å°å°', uid: 108&#125;const proxyObj = Observe(oldObj, (key, value) =&gt; &#123; console.log(`å±æ€§[$&#123;key&#125;]çš„å€¼è¢«ä¿®æ”¹ä¸º[$&#123;value&#125;]`)&#125;)// output:// emit getter name// å°å°console.log(proxyObj.name)// output:// emit setter name// å±æ€§[name]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¤§å¤§]proxyObj.name = 'å¤§å¤§' 2. Proxy12345678910111213141516171819202122232425262728293031function Observe(obj, callback) &#123; return new Proxy(obj, &#123; get: (target, key) =&gt; &#123; console.log('emit getter', key) return target[key] &#125;, set: (target, key, newVal) =&gt; &#123; console.log('emit setter', key) obj[key] = newVal callback(key, newVal) &#125; &#125;)&#125;let oldObj = &#123; name: 'å°å°', uid: 108&#125;const proxyObj = Observe(oldObj, (key, value) =&gt; &#123; console.log(`å±æ€§[$&#123;key&#125;]çš„å€¼è¢«ä¿®æ”¹ä¸º[$&#123;value&#125;]`)&#125;)// output:// emit getter name// å°å°console.log(proxyObj.name)// output:// emit setter name// å±æ€§[name]çš„å€¼è¢«ä¿®æ”¹ä¸º[å¤§å¤§]proxyObj.name = 'å¤§å¤§' 3. å¯¹æ¯” åœ¨Vue2.0ä¸­ï¼Œæ•°æ®åŒå‘ç»‘å®šå°±æ˜¯é€šè¿‡Object.definePropertyå»ç›‘å¬å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œç„¶ååœ¨get,setæ–¹æ³•ä¸­é€šè¿‡å‘å¸ƒè®¢é˜…è€…æ¨¡å¼æ¥å®ç°çš„æ•°æ®å“åº”ï¼Œä½†æ˜¯å­˜åœ¨ä¸€å®šçš„ç¼ºé™·ï¼Œæ¯”å¦‚åªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œå¯¹äºæ–°å¢åˆ é™¤å±æ€§å°±æ— èƒ½ä¸ºåŠ›äº†ï¼ŒåŒæ—¶æ— æ³•ç›‘å¬æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥åœ¨Vue3.0ä¸­å°†å…¶æ¢æˆäº†åŠŸèƒ½æ›´å¼ºå¤§çš„Proxyã€‚ åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœæ‰§è¡Œ proxyObj.newVariable = &#39;haha&#39;ï¼ŒdefinePropertyå®ç°å°†ä¸èƒ½è§¦å‘setteræ–¹æ³•ï¼ŒProxyå®ç°èƒ½å¤Ÿè§¦å‘ã€‚ 4. äº†è§£Proxy Proxy å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ 4.0 åŸºæœ¬è¯­æ³•1const proxy = new Proxy(target, handler) åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå·²ç»ä½¿ç”¨åˆ°äº†handleré‡Œçš„getä¸setã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰11ä¸ªæ–¹æ³•ï¼Œå…±è®¡13ä¸ªã€‚é‡ç‚¹æè¿°å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•ã€‚ 4.1 handler.get(target, key, receiver) å±æ€§è¯»å–æ“ä½œçš„æ•æ‰å™¨ã€‚å½“é€šè¿‡proxyå»è¯»å–å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°geté’©å­å‡½æ•°é‡Œé¢ã€‚ target ç›®æ ‡å¯¹è±¡ key è¢«è·å–çš„å±æ€§å receiver Proxyæˆ–è€…é›†æˆProxyçš„å¯¹è±¡ 123456const proxy = new Proxy(&#123;&#125;, &#123; get(target, key, receiver) &#123; console.log('emit getter', target, key, receiver) return target[key] &#125;&#125;) å¦‚æœè¿èƒŒäº†ä»¥ä¸‹çš„çº¦æŸï¼Œproxyä¼šæŠ›å‡º TypeError å¦‚æœè¦è®¿é—®çš„ç›®æ ‡å±æ€§æ˜¯ ä¸å¯å†™ å¹¶ä¸” ä¸å¯é…ç½® çš„ï¼Œåˆ™è¿”å›çš„å€¼å¿…é¡»ä¸è¯¥ç›®æ ‡å±æ€§çš„å€¼ç›¸åŒã€‚ å¦‚æœè¦è®¿é—®çš„ç›®æ ‡å±æ€§æ²¡æœ‰é…ç½®è®¿é—®æ–¹æ³•ï¼Œå³getæ–¹æ³•æ˜¯undefinedçš„ï¼Œåˆ™è¿”å›å€¼å¿…é¡»ä¸ºundefinedã€‚(æ²¡ç†è§£ï¼Œæœªé…ç½®getæ–¹æ³•ï¼Œè¿”å›å€¼æ€ä¹ˆå®šä¹‰?) 12345678910111213var obj = &#123;&#125;Object.defineProperty(obj, 'age', &#123; configurable: false, writable: false, value: 10&#125;)var p = new Proxy(obj, &#123; get(target, key) &#123; return 20 &#125;&#125;)// Uncaught TypeError: 'get' on proxy: property 'age' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '10' but got '20')console.log(p.age) 4.2 handler.set(target, key, value, receiver) å±æ€§è®¾ç½®æ“ä½œçš„æ•æ‰å™¨ã€‚å½“é€šè¿‡proxyå»ä¸ºå¯¹è±¡è®¾ç½®ä¿®æ”¹å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°seté’©å­å‡½æ•°é‡Œé¢ã€‚ target ç›®æ ‡å¯¹è±¡ key å°†è¢«è®¾ç½®çš„å±æ€§åæˆ– Symbol value æ–°å±æ€§å€¼ receiver æœ€åˆè¢«è°ƒç”¨çš„å¯¹è±¡ã€‚é€šå¸¸æ˜¯ proxy æœ¬èº«ï¼Œä½† handler çš„ set æ–¹æ³•ä¹Ÿæœ‰å¯èƒ½åœ¨åŸå‹é“¾ä¸Šï¼Œæˆ–ä»¥å…¶ä»–æ–¹å¼è¢«é—´æ¥åœ°è°ƒç”¨ï¼ˆå› æ­¤ä¸ä¸€å®šæ˜¯ proxy æœ¬èº«ï¼‰ã€‚æ¯”å¦‚ï¼šå‡è®¾æœ‰ä¸€æ®µä»£ç æ‰§è¡Œ obj.name = â€œjenâ€ï¼Œ obj ä¸æ˜¯ä¸€ä¸ª proxyï¼Œä¸”è‡ªèº«ä¸å« name å±æ€§ï¼Œä½†æ˜¯å®ƒçš„åŸå‹é“¾ä¸Šæœ‰ä¸€ä¸ª proxyï¼Œé‚£ä¹ˆï¼Œé‚£ä¸ª proxy çš„ set() å¤„ç†å™¨ä¼šè¢«è°ƒç”¨ï¼Œè€Œæ­¤æ—¶ï¼Œobj ä¼šä½œä¸º receiver å‚æ•°ä¼ è¿›æ¥ã€‚ è¿”å›å€¼ set() æ–¹æ³•åº”å½“è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ è¿”å› true ä»£è¡¨å±æ€§è®¾ç½®æˆåŠŸã€‚ åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœ set() æ–¹æ³•è¿”å› falseï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚ å¦‚æœè¿èƒŒäº†ä»¥ä¸‹çš„çº¦æŸï¼Œproxyä¼šæŠ›å‡º TypeError è‹¥ç›®æ ‡å±æ€§æ˜¯ä¸€ä¸ªä¸å¯å†™ä»¥åŠä¸å¯é…ç½®çš„æ•°æ®å±æ€§ï¼Œåˆ™ä¸èƒ½æ”¹å˜å®ƒçš„å€¼ã€‚(ä½†æ˜¯ç»è¿‡æµ‹è¯•ï¼Œå¹¶æ²¡æœ‰æŠ›å‡ºé”™è¯¯âŒ) å¦‚æœç›®æ ‡å±æ€§æ²¡æœ‰é…ç½®å­˜å‚¨æ–¹æ³•ï¼Œå³ [[Set]] å±æ€§çš„æ˜¯ undefinedï¼Œåˆ™ä¸èƒ½è®¾ç½®å®ƒçš„å€¼ã€‚(åŒæ ·çš„ç–‘é—®ï¼Œæ²¡æœ‰setæ–¹æ³•ï¼Œå¦‚ä½•è®¾ç½®å€¼å‘¢?) åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœ set() æ–¹æ³•è¿”å› falseï¼Œé‚£ä¹ˆä¹Ÿä¼šæŠ›å‡ºä¸€ä¸ª TypeError å¼‚å¸¸ã€‚ 12345678var p = new Proxy(&#123;&#125;, &#123; set(target, key, value, receiver) &#123; target[key] = value // éä¸¥æ ¼æ¨¡å¼ä¸‹å¯çœç•¥ return true &#125;&#125;)p.age = 10 12345678910\"use strict\"var p = new Proxy(&#123;&#125;, &#123; set(target, key, value, receiver) &#123; target[key] = value // ä¸¥æ ¼æ¨¡å¼æ²¡æœ‰è¿”å›å€¼æˆ–è¿”å›false ä¼šæŠ›å‡ºTypeError return false &#125;&#125;)// Uncaught TypeError: 'set' on proxy: trap returned falsish for property 'age'p.age = 10 1234567891011121314var obj = &#123;&#125;Object.defineProperty(obj, 'age', &#123; configurable: false, writable: false, value: 10&#125;)var p = new Proxy(obj, &#123; set(target, key, value, receiver) &#123; target[key] = value return true &#125;&#125;)// è®¾ç½®æˆåŠŸ æ²¡æœ‰æŠ›é”™è¯¯âŒp.age = 20 å¯¹æ¯”Vue2.x åœ¨ä½¿ç”¨Vue2.0çš„æ—¶å€™ï¼Œå¦‚æœç»™å¯¹è±¡æ·»åŠ æ–°å±æ€§çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦è°ƒç”¨ $set, è¿™æ˜¯å› ä¸ºObject.definePropertyåªèƒ½ç›‘å¬å·²å­˜åœ¨çš„å±æ€§ï¼Œè€Œæ–°å¢çš„å±æ€§æ— æ³•ç›‘å¬ï¼Œè€Œé€šè¿‡ $set ç›¸å½“äºæ‰‹åŠ¨ç»™å¯¹è±¡æ–°å¢äº†å±æ€§ï¼Œç„¶åå†è§¦å‘æ•°æ®å“åº”ã€‚ä½†æ˜¯å¯¹äºVue3.0æ¥è¯´ï¼Œå› ä¸ºä½¿ç”¨äº†Proxyï¼Œåœ¨ä»–çš„seté’©å­å‡½æ•°ä¸­æ˜¯å¯ä»¥ç›‘å¬åˆ°æ–°å¢å±æ€§çš„ï¼Œæ‰€ä»¥å°±ä¸å†éœ€è¦ä½¿ç”¨ 4.3 handler.has(target, key) in æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚å½“ä½¿ç”¨inåˆ¤æ–­å±æ€§æ˜¯å¦åœ¨proxyä»£ç†å¯¹è±¡é‡Œé¢æ—¶ï¼Œä¼šè§¦å‘ã€‚ target ç›®æ ‡å¯¹è±¡ key éœ€è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨çš„å±æ€§. è¿”å›å€¼ has æ–¹æ³•è¿”å›ä¸€ä¸ª boolean å±æ€§çš„å€¼. 1234567891011121314const obj = &#123; publicFn() &#123;&#125;, _privateFn() &#123;&#125;&#125;const p = new Proxy(obj, &#123; has(target, key) &#123; if (key.startWith('_')) &#123; return false &#125; return target[key] &#125;&#125;)console.log('publicFn' in obj) // trueconsole.log('_privateFn' in obj) // false å¦‚æœè¿åäº†ä¸‹é¢è¿™äº›è§„åˆ™, proxy å°†ä¼šæŠ›å‡º TypeError: å¦‚æœç›®æ ‡å¯¹è±¡çš„æŸä¸€å±æ€§æœ¬èº«ä¸å¯è¢«é…ç½®ï¼Œåˆ™è¯¥å±æ€§ä¸èƒ½å¤Ÿè¢«ä»£ç†éšè—(æ€ä¹ˆå†™ç¤ºä¾‹â€¦) å¦‚æœç›®æ ‡å¯¹è±¡ä¸ºä¸å¯æ‰©å±•å¯¹è±¡ï¼Œåˆ™è¯¥å¯¹è±¡çš„å±æ€§ä¸èƒ½å¤Ÿè¢«ä»£ç†éšè— 123456789var obj = &#123; age: 10 &#125;Object.preventExtensions(obj)var p = new Proxy(obj, &#123; has: function(target, key) &#123; return false &#125;&#125;)// Uncaught TypeError: 'has' on proxy: trap returned falsish for property 'a' but the proxy target is not extensibleconsole.log('age' in p) 4.4 handler.deleteProperty(target, key) delete æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚å½“ä½¿ç”¨deleteå»åˆ é™¤å¯¹è±¡é‡Œé¢çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¿›å…¥deleteProperty`é’©å­å‡½æ•° target ç›®æ ‡å¯¹è±¡ key å¾…åˆ é™¤çš„å±æ€§å è¿”å›å€¼ deleteProperty å¿…é¡»è¿”å›ä¸€ä¸ª Boolean ç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºäº†è¯¥å±æ€§æ˜¯å¦è¢«æˆåŠŸåˆ é™¤ã€‚ 12345678910111213141516var p = new Proxy(&#123; name: 'zhangsan', age: 10 &#125;, &#123; deleteProperty(target, key) &#123; console.log(target, key) if (key === 'name') &#123; console.log('å±æ€§' + key + 'ä¸å¯ä»¥è¢«åˆ é™¤') return false &#125; delete target[key] return true &#125;&#125;)// true undefinedconsole.log(delete p.age, p.age)// å±æ€§nameä¸å¯ä»¥è¢«åˆ é™¤// false zhangsanconsole.log(delete p.name, p.name) å¦‚æœè¿èƒŒäº†ä»¥ä¸‹ä¸å˜é‡ï¼Œproxy å°†ä¼šæŠ›å‡ºä¸€ä¸ª TypeError: å¦‚æœç›®æ ‡å¯¹è±¡çš„å±æ€§æ˜¯ä¸å¯é…ç½®çš„ï¼Œé‚£ä¹ˆè¯¥å±æ€§ä¸èƒ½è¢«åˆ é™¤ 12345678910111213var obj = &#123;&#125;Object.defineProperty(obj, 'age', &#123; configurable: false, value: 10&#125;)var p = new Proxy(obj, &#123; deleteProperty(target, key) &#123; delete target[key] return true &#125;&#125;)// Uncaught TypeError: 'deleteProperty' on proxy: trap returned truish for property 'age' which is non-configurable in the proxy targetconsole.log(delete p.age, p.age) å¯¹æ¯”vue2.x å…¶å®ä¸ $set è§£å†³çš„é—®é¢˜ç±»ä¼¼ï¼ŒVue2.0æ˜¯æ— æ³•ç›‘å¬åˆ°å±æ€§è¢«åˆ é™¤çš„ï¼Œæ‰€ä»¥æä¾›äº† $delete ç”¨äºåˆ é™¤å±æ€§ï¼Œä½†æ˜¯å¯¹äºProxyï¼Œæ˜¯å¯ä»¥ç›‘å¬åˆ é™¤æ“ä½œçš„ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å†ä½¿ç”¨ $delete äº† 4.5 handler.apply(target, thisArg, argumentsList) å‡½æ•°è°ƒç”¨æ“ä½œçš„æ•æ‰å™¨ã€‚å½“proxyç›‘å¬çš„æ˜¯ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå½“è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¼šè¿›å…¥applyé’©å­å‡½æ•° target ç›®æ ‡å¯¹è±¡ï¼ˆå‡½æ•°ï¼‰ thisArg è¢«è°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡å¯¹è±¡ argumentsList è¢«è°ƒç”¨æ—¶çš„å‚æ•°æ•°ç»„ è¿”å›å€¼ å¯è¿”å›ä»»ä½•å€¼ 1234567var p = new Proxy(function() &#123;&#125;, &#123; apply(target, thisArg, argumentsList) &#123; return argumentsList[0] + argumentsList[1] + argumentsList[2] &#125;&#125;)// 6console.log(p(1, 2, 3)) å¦‚æœè¿åäº†ä»¥ä¸‹çº¦æŸï¼Œä»£ç†å°†æŠ›å‡ºä¸€ä¸ªTypeErrorï¼š targetå¿…é¡»æ˜¯å¯è¢«è°ƒç”¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ã€‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°† function(){} æ”¹æˆ {} å°†ä¼šæŠ¥é”™ 4.6 handler.ownKeyså½“é€šè¿‡ Object.getOwnPropertyNames,Object.getownPropertySymbols,Object.keys,Reflect.ownKeyså»è·å–å¯¹è±¡çš„ä¿¡æ¯çš„æ—¶å€™ï¼Œå°±ä¼šè¿›å…¥ownKeysè¿™ä¸ªé’©å­å‡½æ•° 4.7 handler.constructå½“ä½¿ç”¨newæ“ä½œç¬¦çš„æ—¶å€™ï¼Œä¼šè¿›å…¥constructè¿™ä¸ªé’©å­å‡½æ•° 4.8 handler.definePropertyå½“ä½¿ç”¨Object.definePropertyå»ä¿®æ”¹å±æ€§ä¿®é¥°ç¬¦çš„æ—¶å€™ï¼Œä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•° 4.9 handler.getPropertyOfå½“è¯»å–å¯¹è±¡çš„åŸå‹çš„æ—¶å€™ï¼Œä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•° 4.10 handler.setPropertyOfå½“è®¾ç½®å¯¹è±¡çš„åŸå‹çš„æ—¶å€™ï¼Œä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•° 4.11 handler.isExtensibleå½“é€šè¿‡Object.isExtensibleå»åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥æ·»åŠ æ–°çš„å±æ€§çš„æ—¶å€™ï¼Œè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•° 4.12 handler.preventExtensionså½“é€šè¿‡Object.preventExtensionså»è®¾ç½®å¯¹è±¡ä¸å¯ä»¥ä¿®æ”¹æ–°å±æ€§æ—¶å€™ï¼Œè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•° 4.13 handler.getOwnPropertyDescriptoråœ¨è·å–ä»£ç†å¯¹è±¡æŸä¸ªå±æ€§çš„å±æ€§æè¿°æ—¶è§¦å‘è¯¥æ“ä½œï¼Œæ¯”å¦‚åœ¨æ‰§è¡Œ Object.getOwnPropertyDescriptor(proxy, â€œfooâ€) æ—¶ä¼šè¿›å…¥è¿™ä¸ªé’©å­å‡½æ•° 5. Reflect åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬è·å–å±æ€§çš„å€¼æˆ–è€…ä¿®æ”¹å±æ€§çš„å€¼éƒ½æ˜¯é€šè¿‡ç›´æ¥æ“ä½œtargetæ¥å®ç°çš„ï¼Œä½†å®é™…ä¸ŠES6å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†åœ¨Proxyå†…éƒ¨è°ƒç”¨å¯¹è±¡çš„é»˜è®¤è¡Œä¸ºçš„API,å³Reflectã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç  123456const obj = &#123;&#125;const proxy = new Proxy(obj, &#123; get(target, key, receiver) &#123; return Reflect.get(target, key, receiver) &#125;&#125;) å¤§å®¶å¯èƒ½çœ‹åˆ°ä¸Šé¢çš„ä»£ç ä¸ç›´æ¥ä½¿ç”¨target[key]çš„æ–¹å¼æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä½†å®é™…ä¸ŠReflectçš„å‡ºç°æ˜¯ä¸ºäº†è®©Objectä¸Šé¢çš„æ“ä½œæ›´åŠ è§„èŒƒï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åˆ¤æ–­æŸä¸€ä¸ªpropæ˜¯å¦åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨åˆ°in,å³ 12const obj = &#123;name: 'zhangsan'&#125;console.log('name' in obj) ä½†ä¸Šé¢çš„æ“ä½œæ˜¯ä¸€ç§å‘½ä»¤å¼çš„è¯­æ³•ï¼Œé€šè¿‡Reflectå¯ä»¥å°†å…¶è½¬å˜ä¸ºå‡½æ•°å¼çš„è¯­æ³•ï¼Œæ˜¾å¾—æ›´åŠ è§„èŒƒ 1Reflect.has(obj,'name') 6. å‚è€ƒæ–‡ç«  æ˜é‡‘åšæ–‡ MDN","comments":true,"tags":[{"name":"defineProperty","slug":"defineProperty","permalink":"https://JnathanCoder.github.io/tags/defineProperty/"},{"name":"proxy","slug":"proxy","permalink":"https://JnathanCoder.github.io/tags/proxy/"}]},{"title":"vueè‡ªå®šä¹‰ç”Ÿå‘½å‘¨æœŸé’©å­","date":"2020-08-25T09:49:19.000Z","path":"2020/08/25/vue-custom-hooks/","text":"å…ˆæ‘˜æŠ„åŸä½œè€…æ–‡ç« ä¸­å¼•ç”¨çš„è¯å§~ è‘¡è„ç¾é…’å¤œå…‰æ¯ï¼Œæ¬²é¥®çµç¶äº§å“å‚¬ã€‚ å®¢æˆ·ç°åœºå›è«ç¬‘ï¼Œå¤æ¥åŸ‹å‘å‡ äººå›ï¼Ÿ ä¸è¦å¹ç­ä½ çš„çµæ„Ÿå’Œä½ çš„æƒ³è±¡åŠ›; ä¸è¦æˆä¸ºä½ çš„æ¨¡å‹çš„å¥´éš¶ã€‚ â€”â€”æ–‡æ£®ç‰¹ãƒ»æ¢µé«˜ ç„¶åä¹Ÿä¸çŸ¥é“è¯´å•¥ï¼Œæ¥ç‚¹ç¤ºä¾‹ä»£ç å§ utils/emitter.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import Vue from 'vue'/** * é€šçŸ¥ç»„ä»¶åŠå…¶å­ç»„ä»¶é¡µé¢å¯è§çŠ¶æ€å˜æ›´ * @param &#123;String&#125; lifeCycleName ç”Ÿå‘½å‘¨æœŸé’©å­å * @param &#123;vmInstance&#125; vm å®ä¾‹ */const notifyVisibilityChange = (lifeCycleName, vm) =&gt; &#123; // ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¼šå­˜åœ¨$optionsä¸­ï¼Œé€šè¿‡$options[lifeCycleName]è·å–ç”Ÿå‘½å‘¨æœŸ const lifeCycles = vm.$options[lifeCycleName] // å› ä¸ºä½¿ç”¨äº†createdçš„åˆå¹¶ç­–ç•¥ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ if (lifeCycles &amp;&amp; lifeCycles.length) &#123; // éå† lifeCycleNameå¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ—è¡¨ï¼Œä¾æ¬¡æ‰§è¡Œ lifeCycles.forEach(lifecycle =&gt; &#123; process.env.NODE_ENV !== 'production' &amp;&amp; console.info('è‡ªå®šä¹‰' + lifeCycleName + 'ç”Ÿå‘½å‘¨æœŸé’©å­å·²è§¦å‘ï¼Œç»„ä»¶nameï¼š' + vm.$options.name) lifecycle.call(vm) &#125;) &#125; // éå†æ‰€æœ‰çš„å­ç»„ä»¶ï¼Œç„¶åä¾æ¬¡é€’å½’æ‰§è¡Œ if (vm.$children &amp;&amp; vm.$children.length) &#123; vm.$children.forEach(child =&gt; &#123; notifyVisibilityChange(lifeCycleName, child) &#125;) &#125;&#125;const CustomHooks = &#123; /** * å®‰è£…æ³¨å†Œ */ Attach() &#123; // Vueçš„åˆå¹¶ç­–ç•¥ const optionMergeStrategies = Vue.config.optionMergeStrategies // å®šä¹‰äº†ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•° pageVisible, pageHidden // è¿™ä¸ªç›¸å½“äºæŒ‡å®š pageVisible, pageHidden çš„åˆå¹¶ç­–ç•¥ä¸ createdçš„ç›¸åŒï¼ˆä½¿ç”¨å…¶ä»–ç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½ä¸€æ ·ï¼‰ optionMergeStrategies.pageVisible = optionMergeStrategies.created optionMergeStrategies.pageHidden = optionMergeStrategies.created &#125;, /** * ç»‘å®šç›‘å¬ * @param &#123;vmInstance&#125; rootVm æ ¹å®ä¾‹ */ Observer(rootVm) &#123; window.addEventListener('visibilitychange', () =&gt; &#123; // åˆ¤æ–­è°ƒç”¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•° let lifeCycleName = undefined if (document.visibilityState === 'hidden') &#123; lifeCycleName = 'pageHidden' &#125; else if (document.visibilityState === 'visible') &#123; lifeCycleName = 'pageVisible' &#125; if (lifeCycleName) &#123; // é€šè¿‡æ‰€æœ‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŒ–äº† notifyVisibilityChange(lifeCycleName, rootVm) &#125; &#125;) &#125;&#125;export default CustomHooks main.js123456789101112131415import CustomHooks from '@/utils/custom-emitter'// å®ä¾‹åŒ–ä¹‹å‰è¿›è¡Œåˆå§‹åŒ–CustomHooks.Attach()/* eslint-disable no-new */const rootVm = new Vue(&#123; el: '#app', router, components: &#123; App &#125;, template: '&lt;App/&gt;'&#125;)// å®ä¾‹åŒ–ä¹‹åç»‘å®šç›‘å¬CustomHooks.Observer(rootVm) ä½¿ç”¨ demo.vue12345678910111213export default &#123; name: \"demo\", data() &#123; return &#123;&#125; &#125;, created() &#123;&#125;, pageVisible() &#123; // TODO é¡µé¢å¯è§é€»è¾‘ å¦‚å¼€å¯å·²æš‚åœçš„åŠŸèƒ½ &#125;, pageHidden() &#123; // TODO é¡µé¢ä¸å¯è§é€»è¾‘ å¦‚æš‚åœæŸäº›èŠ±é”€å¾ˆå¤§çš„åŠ¨ç”»ã€ajaxè½®è¯¢ &#125;&#125; å‚è€ƒæ–‡ç« å‰æ–¹é«˜èƒ½ï¼Œè¿™æ˜¯æœ€æ–°çš„ä¸€æ³¢Vueå®æˆ˜æŠ€å·§","comments":true,"tags":[{"name":"vue","slug":"vue","permalink":"https://JnathanCoder.github.io/tags/vue/"}]},{"title":"Vueè‡ªå®šä¹‰æŒ‡ä»¤ image-lazyLoad","date":"2020-08-13T09:37:41.000Z","path":"2020/08/13/image-lazyload/","text":"ä¸»è¦ä½¿ç”¨ IntersectionObserver çš„ç‰¹æ€§å®ç°ï¼Œå…¶è¿˜èƒ½å®ç°è­¬å¦‚ sticky ã€ä¸Šæ‹‰åŠ è½½ ç­‰åŠŸèƒ½ã€‚è¿™é‡Œåªè®°å½•å®ç°å›¾ç‰‡æ‡’åŠ è½½(å›¾ç‰‡å¼€å§‹å‡ºç°åœ¨è§†å£åŒºåŸŸæˆ–è€…å³å°†å‡ºç°åœ¨è§†å£åŒºåŸŸï¼Œæ‰å¼€å§‹è¯·æ±‚å›¾ç‰‡èµ„æºï¼Œè¿›è¡Œæ¸²æŸ“)çš„è‡ªå®šä¹‰æŒ‡ä»¤çš„å®ç°ä»£ç ã€‚ imageLazyLoad.js1234567891011121314151617181920212223242526272829303132333435363738394041// åŠ è½½å›¾ç‰‡function fetchImage(target, src) &#123; const tempImg = new Image() tempImg.src = src tempImg.onload = () =&gt; &#123; target.src = src &#125;&#125;let isIntersecting = false// åˆ›å»ºä¸€ä¸ªç›‘è§†å™¨let observer = new IntersectionObserver( (entries) =&gt; &#123; entries.forEach( (entry) =&gt; &#123; // å·²ç»è¿›å…¥è§†å£ ä¿è¯åªè§¦å‘ä¸€æ¬¡fetchImage if (isIntersecting) return if (entry.isIntersecting) &#123; isIntersecting = true fetchImage(entry.target, entry.target.lazySrc) &#125; &#125;)&#125;, &#123; // è·ç¦»è§†å£100pxæå‰è§¦å‘ rootMargin: '100px 0px'&#125;)export default &#123; inserted(el, binding) &#123; // é»˜è®¤å›¾ç‰‡ el.src = 'http://localhost:8080/static/images/before_load.png' // å›¾ç‰‡åœ°å€ç»‘å®šåœ¨lazy-srcå±æ€§ä¸Šï¼Œä½œä¸ºä¸­è½¬ el.lazySrc = binding.value // å¼€å§‹ç›‘å¬ observer.observe(el) &#125;, unbind() &#123; // è§£é™¤ç›‘å¬ observer.disconnect() &#125;&#125; å…¨å±€æ³¨å†Œ main.js123import Vue from 'vue'import imageLazyLoad from './imageLazyLoad'Vue.directive('lazyLoad', imageLazyLoad) å±€éƒ¨æ³¨å†Œ test.vue1234567import imageLazyLoad from &apos;./imageLazyLoad&apos;export default &#123; created() &#123;&#125;, directives: &#123; lazyLoad: imageLazyLoad &#125;&#125; ä½¿ç”¨ test.vue1&lt;img v-lazy-load=&quot;imgSrc&quot; /&gt;","comments":true,"tags":[{"name":"vue","slug":"vue","permalink":"https://JnathanCoder.github.io/tags/vue/"},{"name":"è‡ªå®šä¹‰æŒ‡ä»¤","slug":"è‡ªå®šä¹‰æŒ‡ä»¤","permalink":"https://JnathanCoder.github.io/tags/è‡ªå®šä¹‰æŒ‡ä»¤/"},{"name":"lazy","slug":"lazy","permalink":"https://JnathanCoder.github.io/tags/lazy/"}]},{"title":"Web Worker ç®€ä»‹","date":"2020-08-13T08:22:26.000Z","path":"2020/08/13/web-worker/","text":"èƒŒæ™¯ JavaScript è¯­è¨€é‡‡ç”¨çš„æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰ä»»åŠ¡åªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šå®Œæˆï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ã€‚å‰é¢çš„ä»»åŠ¡æ²¡åšå®Œï¼Œåé¢çš„ä»»åŠ¡åªèƒ½ç­‰ç€ã€‚éšç€ç”µè„‘è®¡ç®—èƒ½åŠ›çš„å¢å¼ºï¼Œå°¤å…¶æ˜¯å¤šæ ¸ CPU çš„å‡ºç°ï¼Œå•çº¿ç¨‹å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ï¼Œæ— æ³•å……åˆ†å‘æŒ¥è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›ã€‚Web Worker çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸º JavaScript åˆ›é€ å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸ä¸»çº¿ç¨‹åˆ›å»º Worker çº¿ç¨‹ï¼Œå°†ä¸€äº›ä»»åŠ¡åˆ†é…ç»™åè€…è¿è¡Œã€‚åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„åŒæ—¶ï¼ŒWorker çº¿ç¨‹åœ¨åå°è¿è¡Œï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ã€‚ç­‰åˆ° Worker çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡ï¼Œå†æŠŠç»“æœè¿”å›ç»™ä¸»çº¿ç¨‹ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä¸€äº›è®¡ç®—å¯†é›†å‹æˆ–é«˜å»¶è¿Ÿçš„ä»»åŠ¡ï¼Œè¢« Worker çº¿ç¨‹è´Ÿæ‹…äº†ï¼Œä¸»çº¿ç¨‹ï¼ˆé€šå¸¸è´Ÿè´£ UI äº¤äº’ï¼‰å°±ä¼šå¾ˆæµç•…ï¼Œä¸ä¼šè¢«é˜»å¡æˆ–æ‹–æ…¢ã€‚ åŸºæœ¬ç”¨æ³•1const worker = new Worker(jsUrl[, &#123; name: 'yourWorkerName' &#125;]) Tips åˆ†é…ç»™ Worker çº¿ç¨‹è¿è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå¿…é¡»ä¸ä¸»çº¿ç¨‹çš„è„šæœ¬æ–‡ä»¶åŒæºã€‚ Worker çº¿ç¨‹æ‰€åœ¨çš„å…¨å±€å¯¹è±¡ï¼Œä¸ä¸»çº¿ç¨‹ä¸ä¸€æ ·ï¼Œä¸èƒ½ä½¿ç”¨ documentã€windowã€parentã€alert()ã€confirm()ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ consoleï¼Œå¹¶ä¸”ä½¿ç”¨ XMLHttpRequest å‘èµ· AJAX è¯·æ±‚ã€‚ é€šè¿‡ importScript åŠ è½½è¿›æ¥çš„è„šæœ¬æ–‡ä»¶é‡Œï¼ŒåŒæ ·ä¸èƒ½ä½¿ç”¨ alert ç­‰å±æ€§ã€‚åŠ è½½å¤šä¸ªè„šæœ¬æ–‡ä»¶æ—¶ï¼Œç”¨é€—å·éš”å¼€ã€‚ Worker çº¿ç¨‹æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œå³ä¸èƒ½æ‰“å¼€æœ¬æœºçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆfile://ï¼‰ï¼Œå®ƒæ‰€åŠ è½½çš„è„šæœ¬ï¼Œå¿…é¡»æ¥è‡ªç½‘ç»œã€‚ ä¸»çº¿ç¨‹ API12345Worker.onerror(): æŒ‡å®š error äº‹ä»¶çš„ç›‘å¬å‡½æ•°Worker.onmessage(): æŒ‡å®š message äº‹ä»¶çš„ç›‘å¬å‡½æ•°Worker.onmessageerror(): æŒ‡å®š messageerror äº‹ä»¶çš„ç›‘å¬å‡½æ•°Worker.postMessage(): å‘ Worker çº¿ç¨‹å‘é€æ¶ˆæ¯Worker.terminate(): ç»ˆæ­¢ Worker çº¿ç¨‹ Workerçº¿ç¨‹ API123456self.name: Worker çš„åå­—ã€‚è¯¥å±æ€§åªè¯»ï¼Œç”±æ„é€ å‡½æ•°æŒ‡å®šself.onmessage: æŒ‡å®š message äº‹ä»¶çš„ç›‘å¬å‡½æ•°self.onmessageerror: æŒ‡å®š messageerror äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚å‘é€çš„æ•°æ®æ— æ³•åºåˆ—åŒ–æˆå­—ç¬¦ä¸²æ—¶ï¼Œä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶self.close(): å…³é—­ Worker çº¿ç¨‹self.postMessage(): å‘äº§ç”Ÿè¿™ä¸ª Worker çº¿ç¨‹å‘é€æ¶ˆæ¯self.importScripts(): åŠ è½½ JS è„šæœ¬ ç¤ºä¾‹worker.html12345678910111213141516171819202122232425&lt;input type=\"text\" class=\"text\"&gt;&lt;input type=\"button\" class=\"button\" value=\"å‘é€\"&gt;const text = document.querySelector('.text')const button = document.querySelector('.button')const worker = new Worker('./worker.js', &#123; name: 'myworker' &#125;)worker.onmessage = function(event) &#123; console.log('ä¸»çº¿ç¨‹æ”¶åˆ°æ¥è‡ªmyworkerçº¿ç¨‹ä¼ é€’çš„æ¶ˆæ¯ï¼š', event.data) console.log('------------') worker.terminate() console.log('ä¸»çº¿ç¨‹ç»ˆæ­¢myworkerçº¿ç¨‹')&#125;// å½“å‘myworkerä¼ é€’çš„æ¶ˆæ¯æ— æ³•åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶ è§¦å‘worker.onmessageerror = function(event) &#123; // ...&#125;worker.onerror = function() &#123; // ...&#125;button.addEventListener('click', () =&gt; &#123; console.log('ä¸»çº¿ç¨‹å‘myworkerçº¿ç¨‹å‘é€æ¶ˆæ¯ï¼š', text.value) worker.postMessage(text.value)&#125;) worker.js1234567891011121314151617181920// å‡è¾“å‡º myworkerconsole.log(self.name, this.name, name)importScripts('./test-importScript.js')this.onmessage = function(event) &#123; console.log('myworkerçº¿ç¨‹æ”¶åˆ°ä¸»çº¿ç¨‹ä¼ é€’çš„æ¶ˆæ¯ï¼š', event.data) this.postMessage('myworkerçº¿ç¨‹å·²æ”¶åˆ°ä¸»çº¿ç¨‹ä¼ é€’çš„æ¶ˆæ¯') this.close() console.log('---------') console.log('myworkerçº¿ç¨‹å·²ä¸»åŠ¨æ–­å¼€ä¸ä¸»çº¿ç¨‹çš„è¿æ¥ï¼Œä¸èƒ½å†æ”¶åˆ°ä¼ é€’çš„æ¶ˆæ¯')&#125;// å½“å‘ä¸»çº¿ç¨‹ä¼ é€’çš„æ¶ˆæ¯æ— æ³•åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶ è§¦å‘this.onmessageerror = function() &#123; // ...&#125; test-importScript.js12// myworkerconsole.log(this.name) å‚è€ƒWeb Worker ä½¿ç”¨æ•™ç¨‹ - é˜®ä¸€å³°","comments":true,"tags":[{"name":"worker","slug":"worker","permalink":"https://JnathanCoder.github.io/tags/worker/"},{"name":"web-worker","slug":"web-worker","permalink":"https://JnathanCoder.github.io/tags/web-worker/"}]},{"title":"== å’Œ ===","date":"2020-04-29T03:10:04.000Z","path":"2020/04/29/abstract-and-strict-equality/","text":"å…ˆæ¥å‡ ä¸ªä¾‹å­ï¼Œå¸¦ç€é—®é¢˜ä¸€èµ·æ€è€ƒï¼š12345678910111213console.log([10] == 10); // trueconsole.log('10' == 10); // trueconsole.log([] == 0); // trueconsole.log(true == 1); // trueconsole.log([] == false); // trueconsole.log(![] == false); // trueconsole.log([] == ![]); // trueconsole.log('' == 0); // trueconsole.log('' == false); // trueconsole.log(null == false); // falseconsole.log(null == true); // falseconsole.log(!null == true); // trueconsole.log(null == undefined); // true 1. === (strict equality comparision)12345678910111213141516171819202122if (Type(x) !== Type(y)) return falseif (Type(x) === Type(y)) &#123; if (Type(x) === Undefined) return true if (Type(x) === Null) return true if (Type(x) === String) &#123; return é•¿åº¦å’Œå¯¹åº”ä½ç½®ä¸Šå­—ç¬¦éƒ½ç›¸åŒ ? true : false &#125; if (Type(x) === Boolean) &#123; return xyåŒæ—¶ä¸ºtrueæˆ–false ? true : false &#125; if (Type(x) === Symbol) &#123; return åŒä¸€ä¸ªSymbol ? true : false &#125; if (Type(x) === Number) &#123; if (x === NaN) return false if (y === NaN) return false if (xyç›¸ç­‰ ä¾‹å¦‚ x = 8, y = 8) return true if (x = 0, y = -0) return true if (x = -0, y = 0) return true return false // å…¶ä»–æƒ…å†µå‡è¿”å›false &#125;&#125; 2. == (abstract equality comparision)123456789101112if (Type(x) === Type(y)) return x === yif (Type(x) !== Type(y)) &#123; if (x === null &amp;&amp; y === undefined) return true if (x === undefined &amp;&amp; y === null) return true if (Type(x) === Number &amp;&amp; Type(y) === String) return x == ToNumber(y) if (Type(x) === String &amp;&amp; Type(y) === Number) return ToNumber(x) == y if (Type(x) === Boolean) return ToNumber(x) == y if (Type(y) === Boolean) return x == ToNumber(y) if ([String, Number, Symbol].includes(Type(x)) &amp;&amp; Type(y) === Object) return x == ToPrimitive(y) if (Type(x) === Object &amp;&amp; [String, Number, Symbol].includes(Type(y))) return ToPrimitive(x) == y return false // å…¶ä»–æƒ…å†µå‡è¿”å›false&#125; Type(x) è·å–xçš„ç±»å‹ ToNumber(x) å°†xè½¬æ¢æˆNumberç±»å‹ ToBoolean(x) å°†xè½¬æ¢æˆBooleanç±»å‹ ToString(x) å°†xè½¬æ¢æˆStringç±»å‹ ToPrimitive(x) å°†xè½¬æ¢æˆåŸå§‹å€¼ 3. ToPrimitive()æ–¹æ³• - ECMAScriptè§„èŒƒä¸­çš„æŠ½è±¡æ–¹æ³•ï¼ŒJavascriptä¸èƒ½è®¿é—®å…ˆäº†è§£jsä¸­çš„åŸå§‹ç±»å‹ï¼š Null: null Undefined: undefined Number: å¦‚ 0ã€8ã€5.5ã€NaNã€Infinite Boolean: trueã€false String: å¦‚ â€˜abcâ€™ã€â€™â€™ å…¶ä½™éƒ½å±äºâ€™éåŸå§‹ç±»å‹â€™ï¼Œå¦‚ Arrayã€Objectã€Function typeof null å¾—åˆ°çš„ç»“æœæ˜¯object, è¿™æ˜¯jsåœ¨è®¾è®¡ä¹‹åˆçš„é—®é¢˜ã€‚ä½†nullæ˜¯å±äºåŸå§‹ç±»å‹çš„ï¼ˆè®°ä½å°±è¡Œäº†ğŸ¶ï¼‰ ToPrimitive(input[, hint])è½¬æ¢ä¸ºåŸå§‹ç±»å‹çš„æ–¹æ³•ï¼Œæ ¹æ®preferedTypeç›®æ ‡ç±»å‹è¿›è¡Œè½¬æ¢ã€‚preferedTypeåªèƒ½æ˜¯ string æˆ– number è½¬æ¢æ­¥éª¤ï¼š hint ä¸º number inputæ˜¯åŸå§‹å€¼ï¼Œè¿”å›inputæœ¬èº« inputæ˜¯å¯¹è±¡ å…ˆåˆ¤æ–­input.valueOf()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼Œå†åˆ¤æ–­input.toString()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼ŒæŠ›å‡ºä¸èƒ½è½¬æ¢æˆåŸå§‹å€¼çš„TypeErrorã€‚ hint ä¸º string inputæ˜¯åŸå§‹å€¼ï¼Œè¿”å›inputæœ¬èº« inputæ˜¯å¯¹è±¡ å…ˆåˆ¤æ–­input.toString()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼Œå†åˆ¤æ–­input.valueOf()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼ŒæŠ›å‡ºä¸èƒ½è½¬æ¢æˆåŸå§‹å€¼çš„TypeErrorã€‚ hint ä¸ºç©º input æ˜¯ Date æ—¥æœŸç±»å‹ inputè¢«è®¤ä¸ºæ˜¯stringã€‚ å…ˆåˆ¤æ–­input.toString()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼Œå†åˆ¤æ–­input.valueOf()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼ŒæŠ›å‡ºä¸èƒ½è½¬æ¢æˆåŸå§‹å€¼çš„TypeErrorã€‚ input æ˜¯ éDate ç±»å‹ inputè¢«è®¤ä¸ºæ˜¯numberã€‚ å…ˆåˆ¤æ–­input.valueOf()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼Œå†åˆ¤æ–­input.toString()çš„è¿”å›å€¼ã€‚å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œè¿”å›ç»“æœã€‚ å¦åˆ™ï¼ŒæŠ›å‡ºä¸èƒ½è½¬æ¢æˆåŸå§‹å€¼çš„TypeErrorã€‚ å½“è°ƒç”¨ToPrimitiveè€Œæ²¡æœ‰ä¼ hintå‚æ•°æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹hintå°†è¢«èµ‹å€¼Numberã€‚ä½†æ˜¯å¯ä»¥é‡å†™å¯¹è±¡çš„@@toPrimitiveæ–¹æ³•æ¥è¦†ç›–è¿™ä¸ªè¡Œä¸ºã€‚åœ¨æœ¬è§„èŒƒä¸­ï¼Œåªæœ‰Dateå’ŒSymbolä¸¤ä¸ªå¯¹è±¡é‡å†™äº†é»˜è®¤çš„ToPrimitiveæ“ä½œã€‚å¯¹äºDateå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ä¼ hintï¼Œhintå°†è¢«é»˜è®¤èµ‹å€¼ä¸ºString ç¤ºä¾‹1ï¼šToPrimitive([10])123456// æ²¡æœ‰ä¼ å…¥hintå‚æ•°ï¼Œå¹¶ä¸”inputæ˜¯Array, æ‰€ä»¥hintè¢«èµ‹å€¼ä¸ºNumber// å…ˆåˆ¤æ–­valueOf()[10].valueOf() ç­‰äº [10]ï¼Œå±äº Array/Objectï¼Œä¸æ˜¯åŸå§‹ç±»å‹// å†åˆ¤æ–­toString()[10].toString() ç­‰äº '10'ï¼Œå±äº Stringï¼Œæ˜¯åŸå§‹ç±»å‹æ‰€ä»¥ return '10' ç¤ºä¾‹2ï¼šToPrimitive(function sayHi(){})123456789var sayHi = function (name) &#123; console.log('hi, ' + name)&#125;// æ²¡æœ‰ä¼ å…¥hintå‚æ•°ï¼Œå¹¶ä¸”inputæ˜¯Function, æ‰€ä»¥hintè¢«èµ‹å€¼ä¸ºNumber// å…ˆåˆ¤æ–­valueOf() typeof sayHi.valueOf === 'function'sayHi.valueOf() ç­‰äº f (name) &#123; console.log('hi, ' + name) &#125; å±äºFunctionï¼Œä¸æ˜¯åŸå§‹ç±»å‹// å†åˆ¤æ–­toString() typeof sayHi.toString === 'string'sayHi.toString() ç­‰äº function (name) &#123; console.log('hi, ' + name) &#125; å±äºStringï¼Œæ˜¯åŸå§‹ç±»å‹æ‰€ä»¥ return sayHiæ–¹æ³•çš„æ–¹æ³•ä½“æºç å­—ç¬¦ä¸² ä¸Šé¢ç¤ºä¾‹ä¸­ [10] == 10 Type(x) === Object, Type(y) === Numberï¼Œå˜æˆæ¯”è¾ƒ ToPrimitive([10]) == 10 ç”±ç¤ºä¾‹1 çŸ¥é“ ToPrimitive([10]) === â€˜10â€™ï¼Œå˜æˆæ¯”è¾ƒ â€˜10â€™ == 10 æ­¤æ—¶ï¼ŒType(x) === String, Type(y) === Numberï¼Œå˜æˆæ¯”è¾ƒ ToNumber(â€˜10â€™) == 10 ToNumber(â€˜10â€™) === 10ï¼Œå˜æˆæ¯”è¾ƒ 10 == 10 return true [] == 0 Type(x) === Object, Type(y) === Number, å˜æˆæ¯”è¾ƒ ToPrimitive([]) == 0 æ²¡æœ‰ä¼ å…¥hintå‚æ•°ï¼Œ[]ä¸å±äºDateç±»å‹ï¼Œhintè¢«èµ‹å€¼Number Number hintå…ˆåˆ¤æ–­ valueOf()ï¼Œ [].valueOf()è¿”å›æ•°ç»„æœ¬èº«ï¼Œä¸æ˜¯åŸå§‹ç±»å‹ å†åˆ¤æ–­toString()ï¼Œ[].toString() === â€˜â€™ï¼Œå±äºåŸå§‹ç±»å‹ return â€˜â€™ ç­‰å¼å˜æˆ â€˜â€™ == 0 æ­¤æ—¶ï¼ŒType(x) === String, Type(y) === Number, å˜æˆæ¯”è¾ƒToNumber(â€˜â€™) == 0 ToNumber(â€˜â€™) === 0, å˜æˆæ¯”è¾ƒ 0 == 0 return true æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ¨å¯¼ï¼Œä¸éš¾å¯ä»¥å¾—åˆ°ï¼š [] == false è¿”å›trueé‚£ä¹ˆ ![] == false åº”è¯¥è¿”å› falseå§ï¼ åœ¨æ§åˆ¶å°éªŒè¯ä¸€ä¸‹ ![] == false è¿”å›trueã€‚çº³å°¼ï¼ï¼ ![] å…ˆè½¬æ¢æˆ Booleanã€‚ Boolean([]) === true, ![] === false æ­¤æ—¶å˜æˆ false == false return true ç”± [] == false è¿”å›true å’Œ ![] == false è¿”å›true å¾—åˆ° [] == ![] è¿”å› trueã€‚ ğŸ¶ null == false èµ°çš„æ˜¯æœ€åä¸€æ­¥ï¼Œä¸æ»¡è¶³ä»»ä½•æ¡ä»¶ï¼Œç›´æ¥è¿”å›falseï¼Œè¿™ä¸€è¯´æ³•æ²¡æœ‰ç†è§£ã€‚éš¾é“ä¸æ˜¯Type(false) === Booleanç„¶åæ¯”è¾ƒ null == 0ä¹ˆã€‚ã€‚ã€‚ å†å°±æ˜¯ToPrimitive(null) == 0 ?? ç‚¸è£‚ï¼Œæˆ‘å¤ªéš¾äº†ã€‚ 4. toString()æ–¹æ³• å¯ä»¥å°†é™¤(nullå’Œundefined)ä¹‹å¤–çš„æ•°æ®ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸² 123456789101112[].toString() // \"\"[3, 8].toString() // \"3, 8\"new Date().toString() // Fri May 01 2020 14:24:34 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)\"/abc/ig.toString() // \"/abc/ig\"(16).toString() // '16'(16).toString(2) // '10000' äºŒè¿›åˆ¶(2-35éƒ½å¯)(16).toString(8) // '20' å…«è¿›åˆ¶(16).toString(16) // '10' åå…­è¿›åˆ¶0.000006.toString() // '0.000006'0.0000006.toString() // '6e-7' å°æ•°ç‚¹åé¢6ä¸ªæˆ–ä»¥ä¸Š0æ—¶ å°æ•°é‡‡ç”¨eè¡¨ç¤ºæ³•è¾“å‡º(1234567890123456789012).toString() // '1.2345678901234568e+21' æ•´æ•°éƒ¨åˆ†è¶…è¿‡21ä½ï¼Œé‡‡ç”¨eè¡¨ç¤ºæ³• å¯ä»¥ç”¨toString()åŒºåˆ†è‡ªå®šä¹‰æ–¹æ³•å’ŒåŸç”Ÿæ–¹æ³•123function fn () &#123;&#125;fn.toString() // \"function fn () &#123;&#125;\" -- fn æ˜¯è‡ªå®šä¹‰æ–¹æ³•Number.toString() // \"function Number() &#123; [native code] &#125;\" -- Numberæ˜¯ä¸€ä¸ªåŸç”Ÿæ–¹æ³• è¿˜å¯ä»¥ç”¨Object.prototypeä¸Šçš„åŸç”ŸtoString()æ–¹æ³•åˆ¤æ–­æ•°æ®ç±»å‹12345Object.prototype.toString.call('abc'); // \"[object String]\"Object.prototype.toString.call(123); // \"[object Number]\"Object.prototype.toString.call(true); // \"[object Boolean]\"Object.prototype.toString.call(null) // \"[object Null]\"Object.prototype.toString.call(undefined) //â€[object Undefined]\" åˆ¤æ–­åŸç”Ÿå¼•ç”¨ç±»å‹12345678910111213141516171819202122// å‡½æ•°ç±»å‹function fn()&#123;console.log('test')&#125;Object.prototype.toString.call(fn) // \"[object Function]\"// æ—¥æœŸç±»å‹var date = new Date()Object.prototype.toString.call(date) // \"[object Date]\"// æ•°ç»„ç±»å‹var arr = [1,2,3]Object.prototype.toString.call(arr) // \"[object Array]\"// æ­£åˆ™è¡¨è¾¾å¼var reg = /[hbc]at/giObject.prototype.toString.call(reg) // \"[object RegExp]\"// è‡ªå®šä¹‰ç±»å‹function Person(name) &#123; this.name = name&#125;var person = new Person(\"Rose\")Object.prototype.toString.call(person) // \"[object Object]\" 5. String()æ–¹æ³• å¦‚æœæœ‰toString()æ–¹æ³•ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¹¶è¿”å›ç»“æœ å¦åˆ™ï¼š å¦‚æœæ˜¯nullï¼Œè¿”å›â€nullâ€ å¦‚æœæ˜¯undefinedï¼Œè¿”å›â€undefinedâ€ è¦åŒºåˆ†toString()å’ŒString() toString(radix)æ”¯æŒä¼ å…¥radixè¿›åˆ¶å‚æ•° toStringä¸æ”¯æŒnullå’Œundifinedè°ƒç”¨ String(null) === â€˜nullâ€™ String(undifined) === â€˜undefinedâ€™ 6. Number()æ–¹æ³• å¸ƒå°”å€¼ï¼štrue - 1 false - 0 æ•°å­—å€¼ï¼šè¿”å›æ•°å­—æœ¬èº« nullï¼šè¿”å›0 undefined: è¿”å›NaN å­—ç¬¦ä¸²ï¼š åªåŒ…å«æ•°å­—ï¼šè½¬æ¢æˆåè¿›åˆ¶ï¼Œå¿½ç•¥å‰å¯¼0 åŒ…å«æœ‰æ•ˆçš„æµ®ç‚¹æ ¼å¼ï¼šè½¬æ¢æˆæµ®ç‚¹æ•°èŒï¼Œå¿½ç•¥å‰å¯¼0 ç©ºå­—ç¬¦ä¸²ï¼šè¿”å›0 å…¶ä»–æƒ…å†µï¼šè¿”å›NaN å¯¹è±¡ï¼šè°ƒç”¨å¯¹è±¡çš„valueOf()æ–¹æ³•ï¼Œç„¶åä¾æ®å‰é¢çš„è§„åˆ™è½¬æ¢è¿”å›çš„å€¼ã€‚å¦‚æœè½¬æ¢çš„ç»“æœæ˜¯NaNï¼Œåˆ™è°ƒç”¨å¯¹è±¡çš„toString()æ–¹æ³•ï¼Œå†æ¬¡ä¾ç…§å‰é¢çš„è§„åˆ™è½¬æ¢è¿”å›çš„å­—ç¬¦ä¸²å€¼ã€‚ 7. Boolean()æ–¹æ³•ä»¥ä¸‹å€¼ä¼šè¢«è½¬æ¢ä¸ºfalseï¼šfalseã€&quot;&quot;ã€0ã€-0ã€NaNã€nullã€undefinedï¼Œå…¶ä½™ä»»ä½•å€¼éƒ½ä¼šè¢«è½¬æ¢ä¸ºtrueã€‚å¦å¤–Boolean()ä¸ä¼ é€’å‚æ•°æ—¶ï¼Œä¹Ÿè¿”å›falseã€‚ 8. éšå¼è½¬æ¢åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿æˆ‘ä»¬ä¸æä¾›æ˜¾ç¤ºè½¬æ¢ï¼ŒJavascriptä¹Ÿä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œä¸»è¦æƒ…å†µæœ‰ï¼š 8.1 ç”¨äºæ£€æµ‹æ˜¯å¦ä¸ºéæ•°å€¼çš„å‡½æ•°ï¼šisNaN(mix)isNaN()å‡½æ•°ï¼Œä¼šå°è¯•å°†å‚æ•°å€¼ç”¨Number()è¿›è¡Œè½¬æ¢ï¼Œå¦‚æœç»“æœä¸ºâ€œéæ•°å€¼â€åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ 8.2 é€’å¢é€’å‡æ“ä½œç¬¦ï¼ˆåŒ…æ‹¬å‰ç½®å’Œåç½®ï¼‰ã€ä¸€å…ƒæ­£è´Ÿç¬¦å·æ“ä½œç¬¦è¿™äº›æ“ä½œç¬¦é€‚ç”¨äºä»»ä½•æ•°æ®ç±»å‹çš„å€¼ï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„å€¼ï¼Œè¯¥æ“ä½œç¬¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼ˆç»è¿‡å¯¹æ¯”å‘ç°ï¼Œå…¶è§„åˆ™ä¸Number()è§„åˆ™åŸºæœ¬ç›¸åŒï¼‰ï¼š å¦‚æœæ˜¯åŒ…å«æœ‰æ•ˆæ•°å­—å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå…ˆå°†å…¶è½¬æ¢ä¸ºæ•°å­—å€¼ï¼ˆè½¬æ¢è§„åˆ™åŒNumber()ï¼‰ï¼Œåœ¨æ‰§è¡ŒåŠ å‡1çš„æ“ä½œï¼Œå­—ç¬¦ä¸²å˜é‡å˜ä¸ºæ•°å€¼å˜é‡ã€‚ å¦‚æœæ˜¯ä¸åŒ…å«æœ‰æ•ˆæ•°å­—å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå°†å˜é‡çš„å€¼è®¾ç½®ä¸ºNaNï¼Œå­—ç¬¦ä¸²å˜é‡å˜æˆæ•°å€¼å˜é‡ã€‚ å¦‚æœæ˜¯å¸ƒå°”å€¼falseï¼Œå…ˆå°†å…¶è½¬æ¢ä¸º0å†æ‰§è¡ŒåŠ å‡1çš„æ“ä½œï¼Œå¸ƒå°”å€¼å˜é‡ç¼–ç¨‹æ•°å€¼å˜é‡ã€‚ å¦‚æœæ˜¯å¸ƒå°”å€¼trueï¼Œå…ˆå°†å…¶è½¬æ¢ä¸º1å†æ‰§è¡ŒåŠ å‡1çš„æ“ä½œï¼Œå¸ƒå°”å€¼å˜é‡å˜æˆæ•°å€¼å˜é‡ã€‚ å¦‚æœæ˜¯æµ®ç‚¹æ•°å€¼ï¼Œæ‰§è¡ŒåŠ å‡1çš„æ“ä½œã€‚ å¦‚æœæ˜¯å¯¹è±¡ï¼Œå…ˆè°ƒç”¨å¯¹è±¡çš„valueOf()æ–¹æ³•ï¼Œç„¶åå¯¹è¯¥è¿”å›å€¼åº”ç”¨å‰é¢çš„è§„åˆ™ã€‚å¦‚æœç»“æœæ˜¯NaNï¼Œåˆ™è°ƒç”¨toString()æ–¹æ³•åå†åº”ç”¨å‰é¢çš„è§„åˆ™ã€‚å¯¹è±¡å˜é‡å˜æˆæ•°å€¼å˜é‡ã€‚ 8.3 åŠ æ³•è¿ç®—æ“ä½œç¬¦ å¦‚æœä¸¤ä¸ªæ“ä½œå€¼éƒ½æ˜¯æ•°å€¼ï¼Œå…¶è§„åˆ™ä¸ºï¼š å¦‚æœä¸€ä¸ªæ“ä½œæ•°ä¸ºNaNï¼Œåˆ™ç»“æœä¸ºNaN å¦‚æœæ˜¯Infinity+Infinityï¼Œç»“æœæ˜¯Infinity å¦‚æœæ˜¯-Infinity+(-Infinity)ï¼Œç»“æœæ˜¯-Infinity å¦‚æœæ˜¯Infinity+(-Infinity)ï¼Œç»“æœæ˜¯NaN å¦‚æœæ˜¯+0+(+0)ï¼Œç»“æœä¸º+0 å¦‚æœæ˜¯(-0)+(-0)ï¼Œç»“æœä¸º-0 å¦‚æœæ˜¯(+0)+(-0)ï¼Œç»“æœä¸º+0 å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œå€¼ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™ï¼š å¦‚æœä¸¤ä¸ªæ“ä½œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™å°†å®ƒä»¬æ‹¼æ¥èµ·æ¥ å¦‚æœåªæœ‰ä¸€ä¸ªæ“ä½œå€¼ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™å°†å¦å¤–æ“ä½œå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ‹¼æ¥èµ·æ¥ å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ã€æ•°å€¼æˆ–è€…å¸ƒå°”å€¼ï¼Œåˆ™è°ƒç”¨toString()æ–¹æ³•å–å¾—å­—ç¬¦ä¸²å€¼ï¼Œç„¶åå†åº”ç”¨å‰é¢çš„å­—ç¬¦ä¸²è§„åˆ™ã€‚å¯¹äºundefinedå’Œnullï¼Œåˆ†åˆ«è°ƒç”¨String()æ˜¾å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ å¯ä»¥çœ‹å‡ºï¼ŒåŠ æ³•è¿ç®—ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ“ä½œå€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œåˆ™å°†å¦ä¸€ä¸ªæ“ä½œå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæœ€åè¿æ¥èµ·æ¥ã€‚ 8.4 ä¹˜é™¤ã€å‡å·è¿ç®—ç¬¦ã€å–æ¨¡è¿ç®—ç¬¦è¿™äº›æ“ä½œç¬¦é’ˆå¯¹çš„æ˜¯è¿ç®—ï¼Œæ‰€ä»¥ä»–ä»¬å…·æœ‰å…±åŒæ€§ï¼šå¦‚æœæ“ä½œå€¼ä¹‹ä¸€ä¸æ˜¯æ•°å€¼ï¼Œåˆ™è¢«éšå¼è°ƒç”¨Number()å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚å…·ä½“æ¯ä¸€ç§è¿ç®—çš„è¯¦ç»†è§„åˆ™è¯·å‚è€ƒECMAScriptä¸­çš„å®šä¹‰ 8.5 é€»è¾‘æ“ä½œç¬¦ï¼ˆ!ã€&amp;&amp;ã€||ï¼‰é€»è¾‘éï¼ˆï¼ï¼‰æ“ä½œç¬¦é¦–å…ˆé€šè¿‡Boolean()å‡½æ•°å°†å®ƒçš„æ“ä½œå€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼Œç„¶åæ±‚åã€‚ é€»è¾‘ä¸ï¼ˆ&amp;&amp;ï¼‰æ“ä½œç¬¦ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œå€¼ä¸æ˜¯å¸ƒå°”å€¼æ—¶ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™è¿›è¡Œè½¬æ¢ï¼š å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°ç»Boolean()è½¬æ¢åä¸ºtrueï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œå€¼ï¼Œå¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªå€¼ï¼ˆä¸æ˜¯Boolean()è½¬æ¢åçš„å€¼ï¼‰ å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œå€¼ä¸ºnullï¼Œè¿”å›null å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œå€¼ä¸ºNaNï¼Œè¿”å›NaN å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œå€¼ä¸ºundefinedï¼Œè¿”å›undefined é€»è¾‘æˆ–ï¼ˆ||ï¼‰æ“ä½œç¬¦ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œå€¼ä¸æ˜¯å¸ƒå°”å€¼ï¼Œéµå¾ªä»¥ä¸‹è§„åˆ™ï¼š å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œå€¼ç»Boolean()è½¬æ¢åä¸ºfalseï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œå€¼ï¼Œå¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œå€¼ï¼ˆä¸æ˜¯Boolean()è½¬æ¢åçš„å€¼ï¼‰ å¯¹äºundefinedã€nullå’ŒNaNçš„å¤„ç†è§„åˆ™ä¸é€»è¾‘ä¸ï¼ˆ&amp;&amp;ï¼‰ç›¸åŒ 8.6 å…³ç³»æ“ä½œç¬¦ï¼ˆ&lt;, &gt;, &lt;=, &gt;=ï¼‰ å¦‚æœä¸¤ä¸ªæ“ä½œå€¼éƒ½æ˜¯æ•°å€¼ï¼Œåˆ™è¿›è¡Œæ•°å€¼æ¯”è¾ƒ å¦‚æœä¸¤ä¸ªæ“ä½œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æ¯”è¾ƒå­—ç¬¦ä¸²å¯¹åº”çš„å­—ç¬¦ç¼–ç å€¼ å¦‚æœåªæœ‰ä¸€ä¸ªæ“ä½œå€¼æ˜¯æ•°å€¼ï¼Œåˆ™å°†å¦ä¸€ä¸ªæ“ä½œå€¼è½¬æ¢ä¸ºæ•°å€¼ï¼Œè¿›è¡Œæ•°å€¼æ¯”è¾ƒ å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œåˆ™è°ƒç”¨valueOf()æ–¹æ³•ï¼ˆå¦‚æœå¯¹è±¡æ²¡æœ‰valueOf()æ–¹æ³•åˆ™è°ƒç”¨toString()æ–¹æ³•ï¼‰ï¼Œå¾—åˆ°çš„ç»“æœæŒ‰ç…§å‰é¢çš„è§„åˆ™æ‰§è¡Œæ¯”è¾ƒ å¦‚æœä¸€ä¸ªæ“ä½œå€¼æ˜¯å¸ƒå°”å€¼ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºæ•°å€¼ï¼Œå†è¿›è¡Œæ¯”è¾ƒ æ³¨ï¼šNaNæ˜¯éå¸¸ç‰¹æ®Šçš„å€¼ï¼Œå®ƒä¸å’Œä»»ä½•ç±»å‹çš„å€¼ç›¸ç­‰ï¼ŒåŒ…æ‹¬å®ƒè‡ªå·±ï¼ŒåŒæ—¶å®ƒä¸ä»»ä½•ç±»å‹çš„å€¼æ¯”è¾ƒå¤§å°æ—¶éƒ½è¿”å›falseã€‚ 8.7 ç›¸ç­‰æ“ä½œç¬¦ç›¸åº”è§„åˆ™è§æ–‡ç« æœ€åˆå§‹ã€‚ 9. ä½è¿ç®—ç¬¦9.1 æŒ‰ä½ä¸(&amp;)9.2 æŒ‰ä½ä¸(|)9.3 æŒ‰ä½é(~)9.4 æŒ‰ä½å¼‚æˆ–(^)9.5 å·¦ç§»(&lt;&lt;) è¯¥æ“ä½œç¬¦ä¼šå°†å·¦è¾¹æ“ä½œæ•°å‘å·¦ç§»åŠ¨å³è¾¹æ“ä½œæ•°çš„ä½æ•°ã€‚å‘å·¦è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œå³ä¾§ç”¨ 0 è¡¥å……ã€‚3 &lt;&lt; 2 = 3 * 2 ^ 2 = 12 9.6 æœ‰ç¬¦å·å³ç§»(&lt;&lt;) è¯¥æ“ä½œç¬¦ä¼šå°†å·¦è¾¹æ“ä½œæ•°å‘å³ç§»åŠ¨å³è¾¹æ“ä½œæ•°çš„ä½æ•°ã€‚å‘å³è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œæ‹·è´æœ€å·¦ä¾§çš„ä½ä»¥å¡«å……å·¦ä¾§ã€‚ç”±äºæ–°çš„æœ€å·¦ä¾§çš„ä½æ€»æ˜¯å’Œä»¥å‰ç›¸åŒï¼Œç¬¦å·ä½æ²¡æœ‰è¢«æ”¹å˜ã€‚æ‰€ä»¥è¢«ç§°ä½œâ€œç¬¦å·ä¼ æ’­â€ã€‚12 &gt;&gt; 2 = 12 / 2 ^ 2 = 3 9.6 æ— ç¬¦å·å³ç§»(&lt;&lt;&lt;) è¯¥æ“ä½œç¬¦ä¼šå°†å·¦è¾¹æ“ä½œæ•°å‘å³ç§»åŠ¨å³è¾¹æ“ä½œæ•°çš„ä½æ•°ã€‚å‘å³è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œå·¦ä¾§ç”¨0å¡«å……ã€‚å› ä¸ºç¬¦å·ä½å˜æˆäº† 0ï¼Œæ‰€ä»¥ç»“æœæ€»æ˜¯éè´Ÿçš„ã€‚ï¼ˆè¯‘æ³¨ï¼šå³ä¾¿å³ç§» 0 ä¸ªæ¯”ç‰¹ï¼Œç»“æœä¹Ÿæ˜¯éè´Ÿçš„ã€‚ï¼‰ 10. å‚è€ƒæ–‡ç«  æ–‡ç« ä¸€ æ–‡ç« äºŒ æ–‡ç« ä¸‰","comments":true,"tags":[{"name":"==","slug":"","permalink":"https://JnathanCoder.github.io/tags//"},{"name":"===","slug":"","permalink":"https://JnathanCoder.github.io/tags//"},{"name":"æ“ä½œç¬¦","slug":"æ“ä½œç¬¦","permalink":"https://JnathanCoder.github.io/tags/æ“ä½œç¬¦/"},{"name":"è½¬æ¢","slug":"è½¬æ¢","permalink":"https://JnathanCoder.github.io/tags/è½¬æ¢/"}]},{"title":"æ•°æ®ç±»å‹è½¬æ¢","date":"2020-04-18T16:00:00.000Z","path":"2020/04/19/data-type-transfer/","text":"åŸºæœ¬æ•°æ®ç±»å‹æœ‰ Numberã€ Stringã€ Booleanã€ Nullã€ Undefinedã€Objectï¼ŒES6æ–°å¢äº†Symbol ç±»å‹ã€‚ 1. åŸå§‹å€¼è½¬å¸ƒå°”åœ¨Javascriptä¸­ã€‚åªæœ‰6ç§å€¼å¯ä»¥è¢«è½¬æ¢æˆfalseï¼Œå…¶ä½™å‡ä¸ºtrueï¼šfalseã€undefinedã€nullã€NaNã€0ã€&#39;&#39; 12345678console.log(Boolean(false)) // falseconsole.log(Boolean(undefined)) // falseconsole.log(Boolean(null)) // falseconsole.log(Boolean(NaN)) // falseconsole.log(Boolean(0)) // falseconsole.log(Boolean('')) // false// Booleanä¸ä¼ ä»»ä½•å‚æ•°æ—¶ è¿”å›falseconsole.log(Boolean()) // false 2. åŸå§‹å€¼è½¬æ•°å­—ä½¿ç”¨Numberå‡½æ•°å°†æ•°æ®è½¬æ¢æˆæ•°å­—ç±»å‹ï¼Œå‚æ•°æ— æ³•è½¬æ¢æˆæ•°å­—çš„ï¼Œè¿”å›NaNã€‚æ ¹æ®è§„èŒƒï¼Œå¦‚æœNumberå‡½æ•°ä¸ä¼ å‚æ•°ï¼Œè¿”å›0ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œè°ƒç”¨toNumber(value),å…¶å¯¹åº”ç»“æœå¦‚ä¸‹ï¼š å‚æ•°ç±»å‹ ç»“æœ undefined NaN null 0 å¸ƒå°”å€¼ true: 1, false: 0 Number å¯¹åº”çš„å€¼ String æ¯”è¾ƒå¤æ‚ï¼Œçœ‹å…·ä½“ä¾‹å­ 12345678910111213141516171819console.log(Number()) // 0console.log(Number(undefined)) // NaNconsole.log(Number(null)) // 0console.log(Number(true)) // 1console.log(Number(false)) // 0console.log(Number(88)) // 88console.log(Number(\"123\")) // 123console.log(Number(\"-123\")) // -123console.log(Number(\"1.2\")) // 1.2console.log(Number(\"000123\")) // 123console.log(Number(\"-000123\")) // -123console.log(Number(\"0x11\")) // 17console.log(Number(\"\")) // 0console.log(Number(\" \")) // 0console.log(Number(\"123 123\")) // NaNconsole.log(Number(\"foo\")) // NaNconsole.log(Number(\"100a\")) // NaN å¦‚æœé€šè¿‡ Number è½¬æ¢å‡½æ•°ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒä¼šè¯•å›¾å°†å…¶è½¬æ¢æˆä¸€ä¸ªæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼Œè€Œä¸”ä¼šå¿½ç•¥æ‰€æœ‰å‰å¯¼çš„ 0ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯æ•°å­—ï¼Œç»“æœéƒ½ä¼šè¿”å› NaNã€‚å¦‚æœå­—ç¬¦ä¸²å‰ç¼€æ˜¯0xæˆ–è€…0Xï¼Œå°†è½¬æ¢ä¸ºåå…­è¿›åˆ¶æ•°ã€‚ 3. åŸå§‹å€¼è½¬å­—ç¬¦ä½¿ç”¨ String å‡½æ•°å°†ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹ã€‚æ ¹æ®è§„èŒƒï¼Œå¦‚æœä¸ä¼ é€’å‚æ•°ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œè°ƒç”¨toString(value)ï¼Œå…¶å¯¹åº”ç»“æœå¦‚ä¸‹ï¼š å‚æ•°ç±»å‹ ç»“æœ undefined â€œundefinedâ€ null â€œnullâ€ Boolean true: â€œtrueâ€, false: â€œfalseâ€ Number æ¯”è¾ƒå¤æ‚ï¼Œçœ‹å…·ä½“ä¾‹å­ String å¯¹åº”çš„å€¼ 1234567891011121314console.log(String()) // ç©ºå­—ç¬¦ä¸²console.log(String(undefined)) // undefinedconsole.log(String(null)) // nullconsole.log(String(false)) // falseconsole.log(String(true)) // trueconsole.log(String('678')) // 678console.log(String(0)) // 0console.log(String(-0)) // 0console.log(String(NaN)) // NaNconsole.log(String(Infinity)) // Infinityconsole.log(String(-Infinity)) // -Infinityconsole.log(String(1)) // 1 æ³¨æ„è¿™é‡Œçš„ ToString å’Œä¸Šä¸€èŠ‚çš„ ToNumber éƒ½æ˜¯åº•å±‚è§„èŒƒå®ç°çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æš´éœ²å‡ºæ¥ã€‚ 4. å¯¹è±¡è½¬å­—ç¬¦ä¸²å’Œæ•°å­—å‡ ç§åŸºæœ¬æ•°æ®ç±»å‹ä¸­ï¼Œé™¤äº†Nullå’ŒUndefinedç±»å‹å¤–ï¼Œå…¶ä½™5ç§åŸå‹é“¾ä¸Šéƒ½æœ‰valueOf()å’ŒtoString()å‡½æ•°ã€‚è¿™ä¸¤ä¸ªå‡½æ•°ä¸»è¦åœ¨éšå¼ç±»å‹è½¬æ¢æ—¶ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚ 4.1 åŒæ—¶é‡å†™å¯¹è±¡çš„toStringæ–¹æ³•å’ŒvalueOfæ–¹æ³•1234567891011121314151617181920212223var aaa = &#123; i: 10, valueOf: function() &#123; console.log('è°ƒç”¨valueOf...') return this.i + 30 &#125;, toString: function() &#123; console.log('è°ƒç”¨toString...') return this.i + 10 &#125;&#125;console.log(aaa &gt; 20); // è°ƒç”¨valueOf... trueconsole.log('' + aaa); // è°ƒç”¨valueOf... 40console.log(++aaa); // è°ƒç”¨valueOf... 41// åœ¨ä¸æ‰§è¡Œä¸Šä¸€æ­¥ console.log(++aaa) çš„å‰æconsole.log(+aaa); // è°ƒç”¨valueOf... 40// åœ¨æ‰§è¡Œä¸Šä¸€æ­¥ console.log(++aaa) çš„å‰æ æ­¤æ—¶aaaå˜æˆäº†å­—ç¬¦ä¸²41console.log(+aaa); // 41 è°ƒç”¨åŸå‹é“¾ä¸Šé»˜è®¤çš„valueOf()console.log(aaa == 40) // è°ƒç”¨valueOf... true// ä¸Šé¢çš„æ­¥éª¤æ²¡æ‰§è¡Œçš„å‰æä¸‹ å¦åˆ™aaaå˜æˆäº†å­—ç¬¦ä¸²41 æ­¤æ—¶è¾“å‡º41console.log(aaa); // &#123;i: 10, valueOf: Æ’, toString: f&#125;console.log(String(aaa)) // è°ƒç”¨toString... 20 æ€»ç»“ï¼šæ¶‰åŠåˆ°æ“ä½œç¬¦çš„é—®é¢˜ï¼ŒvalueOfçš„ä¼˜å…ˆçº§æ›´é«˜ï¼›æ¶‰åŠåˆ°æ˜¾ç¤ºé—®é¢˜ï¼ŒtoStringæ–¹æ³•ä¼˜å…ˆçº§æ›´é«˜ã€‚ 4.2 åªé‡å†™toStringæ–¹æ³•12345678910111213141516171819var bbb = &#123; i: 10, toString: function() &#123; console.log('è°ƒç”¨toString...') return this.i + 10 &#125;&#125;console.log(bbb &gt; 20); // è°ƒç”¨toString... falseconsole.log('' + bbb); // è°ƒç”¨toString... 20console.log(++bbb); // è°ƒç”¨toString... 21// åœ¨ä¸æ‰§è¡Œä¸Šä¸€æ­¥ console.log(++bbb) çš„å‰æconsole.log(+bbb); // è°ƒç”¨toString... 20// åœ¨æ‰§è¡Œä¸Šä¸€æ­¥ console.log(++bbb) çš„å‰æ æ­¤æ—¶bbbå˜æˆäº†å­—ç¬¦ä¸²21console.log(+bbb); // 21 è°ƒç”¨åŸå‹é“¾ä¸Šé»˜è®¤çš„valueOf()console.log(bbb == 20) // è°ƒç”¨toString... true// console.log(bbb); // &#123;i: 10, toString: Æ’&#125; æ²¡è°ƒç”¨é‡å†™çš„toString()æ–¹æ³•ï¼Œè°ƒç”¨äº†åŸå‹é“¾ä¸Šé»˜è®¤çš„valueOf()console.log(String(bbb)) // è°ƒç”¨toString... 20 æ€»ç»“ï¼š toStringæ–¹æ³•æ¯”åŸå‹é“¾ä¸Šçš„valueOfæ–¹æ³•ä¼˜å…ˆçº§é«˜","comments":true,"tags":[{"name":"æ•°æ®ç±»å‹","slug":"æ•°æ®ç±»å‹","permalink":"https://JnathanCoder.github.io/tags/æ•°æ®ç±»å‹/"},{"name":"ç±»å‹è½¬æ¢","slug":"ç±»å‹è½¬æ¢","permalink":"https://JnathanCoder.github.io/tags/ç±»å‹è½¬æ¢/"}]},{"title":"ç§»åŠ¨ç«¯çœŸæœºè°ƒè¯• spy-debugger","date":"2019-07-15T08:53:26.000Z","path":"2019/07/15/spy-debugger/","text":"å…³äºspy-debuggerä¸€ç«™å¼é¡µé¢è°ƒè¯•ã€æŠ“åŒ…å·¥å…·ã€‚è¿œç¨‹è°ƒè¯•ä»»ä½•æ‰‹æœºæµè§ˆå™¨é¡µé¢ï¼Œä»»ä½•æ‰‹æœºç§»åŠ¨ç«¯webviewï¼ˆå¦‚ï¼šå¾®ä¿¡ï¼ŒHybridAppç­‰ï¼‰ã€‚æ”¯æŒHTTP/HTTPSï¼Œæ— éœ€USBè¿æ¥è®¾å¤‡ã€‚ ç‰¹æ€§1ã€é¡µé¢è°ƒè¯•ï¼‹æŠ“åŒ…2ã€æ“ä½œç®€å•ï¼Œæ— éœ€USBè¿æ¥è®¾å¤‡3ã€æ”¯æŒHTTPSã€‚4ã€spy-debuggerå†…éƒ¨é›†æˆäº†weinreã€node-mitmproxyã€AnyProxyã€‚5ã€è‡ªåŠ¨å¿½ç•¥åŸç”ŸAppå‘èµ·çš„httpsè¯·æ±‚ï¼Œåªæ‹¦æˆªwebviewå‘èµ·çš„httpsè¯·æ±‚ã€‚å¯¹ä½¿ç”¨äº†SSL pinningæŠ€æœ¯çš„åŸç”ŸAppä¸é€ æˆä»»ä½•å½±å“ã€‚6ã€å¯ä»¥é…åˆå…¶å®ƒä»£ç†å·¥å…·ä¸€èµ·ä½¿ç”¨(é»˜è®¤ä½¿ç”¨AnyProxy) (è®¾ç½®å¤–éƒ¨ä»£ç†) å®‰è£…1[sudo] npm install spy-debugger -g ä¸‰åˆ†é’Ÿä¸Šæ‰‹ç¬¬ä¸€æ­¥ï¼šæ‰‹æœºå’ŒPCä¿æŒåœ¨åŒä¸€ç½‘ç»œä¸‹ï¼ˆæ¯”å¦‚åŒæ—¶è¿åˆ°ä¸€ä¸ªWi-Fiä¸‹ï¼‰ç¬¬äºŒæ­¥ï¼šå‘½ä»¤è¡Œè¾“å…¥spy-debuggerï¼ŒæŒ‰å‘½ä»¤è¡Œæç¤ºç”¨æµè§ˆå™¨æ‰“å¼€ç›¸åº”åœ°å€ã€‚ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ‰‹æœºçš„HTTPä»£ç†ï¼Œä»£ç†IPåœ°å€è®¾ç½®ä¸ºPCçš„IPåœ°å€ï¼Œç«¯å£ä¸ºspy-debuggerçš„å¯åŠ¨ç«¯å£(é»˜è®¤ç«¯å£ï¼š9888)ã€‚ Androidè®¾ç½®ä»£ç†æ­¥éª¤ï¼šè®¾ç½® - WLAN - é•¿æŒ‰é€‰ä¸­ç½‘ç»œ - ä¿®æ”¹ç½‘ç»œ - é«˜çº§ - ä»£ç†è®¾ç½® - æ‰‹åŠ¨iOSè®¾ç½®ä»£ç†æ­¥éª¤ï¼šè®¾ç½® - æ— çº¿å±€åŸŸç½‘ - é€‰ä¸­ç½‘ç»œ - HTTPä»£ç†æ‰‹åŠ¨ ç¬¬å››æ­¥ï¼šæ‰‹æœºå®‰è£…è¯ä¹¦ã€‚ spy-debugger initCA ä¼šå°†è¯ä¹¦æ”¾ç½®åˆ°ç³»ç»Ÿæ ¹ç›®å½•node-mitmproxyæ–‡ä»¶å¤¹ã€‚Mac å¦‚ï¼š/users/yourName/node-mitmproxyWindows å¦‚ï¼šC/users/yourName/node-mitmproxyå°†æ–‡ä»¶å¤¹ä¸‹çš„node-mitmproxy.ca.crtåˆ°æ‰‹æœºä¸Šå®‰è£… ç¬¬äº”æ­¥ï¼šç”¨æ‰‹æœºæµè§ˆå™¨è®¿é—®ä½ è¦è°ƒè¯•çš„é¡µé¢å³å¯ã€‚ æ•ˆæœæˆªå›¾ è‡ªå®šä¹‰é€‰é¡¹ç«¯å£(é»˜è®¤ç«¯å£9888)1spy-debugger -p 9999 è®¾ç½®å¤–éƒ¨ä»£ç†ï¼ˆé»˜è®¤ä½¿ç”¨AnyProxyï¼‰1spy-debugger -e http://127.0.0.1:8888 è®¾ç½®é¡µé¢å†…å®¹ä¸ºå¯ç¼–è¾‘æ¨¡å¼ï¼ˆé»˜è®¤falseï¼‰1spy-debugger -w true è¯¥åŠŸèƒ½ä½¿é¡µé¢å†…å®¹ä¿®æ”¹æ›´åŠ ç›´è§‚æ–¹ä¾¿ã€‚å†…éƒ¨å®ç°åŸç†ï¼šåœ¨éœ€è¦è°ƒè¯•çš„é¡µé¢å†…æ³¨å…¥ä»£ç ï¼šdocument.body.contentEditable=trueã€‚æš‚ä¸æ”¯æŒä½¿ç”¨äº†iscrollæ¡†æ¶çš„é¡µé¢ã€‚ æ˜¯å¦å…è®¸weinreç›‘æ§iframeåŠ è½½çš„é¡µé¢(é»˜è®¤false)1spy-debugger -i true æ˜¯å¦åªæ‹¦æˆªæµè§ˆå™¨å‘èµ·çš„httpsè¯·æ±‚ï¼ˆé»˜è®¤trueï¼‰1spy-debugger -b false æ˜¯å¦å…è®¸HTTPç¼“å­˜(é»˜è®¤false)1spy-debugger -c true","comments":true,"tags":[]},{"title":"çŸ¥è¯†ç‚¹","date":"2019-06-06T08:48:44.000Z","path":"2019/06/06/brief-info/","text":"1. ä¸€äº›jsæ’ä»¶ä¸ºä»€ä¹ˆä»¥;å¼€å¤´å› ä¸ºjsä»£ç å…è®¸åœ¨ç»“æŸçš„æ—¶å€™ä¸æ·»åŠ ;, æ‰€ä»¥ä¸¤ä¸ªjsæ–‡ä»¶åœ¨åˆå¹¶æ‹¼æ¥çš„çš„æ—¶å€™å¯èƒ½å‡ºé”™ã€‚ 12345678// a.js// æœ«å°¾æ²¡æœ‰æ·»åŠ ;ç¬¦å·var a = 'test'// b.js(function()&#123; // do something&#125;)(); ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œåˆå¹¶å‹ç¼©çš„æ—¶å€™å°±å¯èƒ½å˜ä¸ºï¼š 123var a = 'test'(function()&#123;&#125;)();// è¿™æ ·ä¼šæŠ¥é”™ï¼š TypeError: 'test' is not a function 2. ä½¿ç”¨é—­åŒ…å®šä¹‰ç§æœ‰å±æ€§123456789101112131415161718function Product() &#123; var name; this.setName = function(value) &#123; name = value; &#125;; this.getName = function() &#123; return name; &#125;;&#125;var p = new Product();p.setName(\"test\");console.log(p.name); // è¾“å‡ºundefinedconsole.log(p.getName()); // è¾“å‡ºtest ä»£ç ä¸­ï¼Œå¯¹è±¡pçš„çš„nameå±æ€§ä¸ºç§æœ‰å±æ€§ï¼Œä½¿ç”¨p.nameä¸èƒ½ç›´æ¥è®¿é—®ã€‚ 3. æšä¸¾å±æ€§ å¯æšä¸¾æ€§åœ¨jsä¸­ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„åŸå‹å±æ€§æ˜¯ä¸å¯æšä¸¾çš„ï¼Œæ¯”å¦‚Objectã€Arrayã€Numberç­‰ã€‚ 12345// æ‰“å°ç»“æœä¸ºç©º Numberå†…ç½®å±æ€§æ˜¯ä¸å¯æšä¸¾çš„var num = new Number()for (let i in num) &#123; console.log(i, num[i])&#125; propertyIsEnumerable Object.propertyIsEnumerable(prop)prop éœ€è¦æµ‹è¯•çš„å±æ€§åè¿”å›å€¼ ç”¨æ¥è¡¨ç¤ºæŒ‡å®šçš„å±æ€§åæ˜¯å¦å¯æšä¸¾çš„Booleanå±æ€§å¿…é¡»æ»¡è¶³ è‡ªèº«å±æ€§ &amp;&amp; æšä¸¾å±æ€§ï¼Œæ‰ä¼šè¿”å›true 1234567var obj = &#123;&#125;obj.test = 'Jnathan'var arr = [23, 67]obj.propertyIsEnumerable('test') // truearr.propertyIsEnumerable(0) // truearr.propertyIsEnumerable(1) // true hasOwnProperty Object.hasOwnProperty(prop)prop éœ€è¦æµ‹è¯•çš„å±æ€§åè¿”å›å€¼ ç”¨æ¥è¡¨ç¤ºæŒ‡å®šçš„å±æ€§åæ˜¯å¦åœ¨å¯¹è±¡ä¸­çš„Boolean 1234567var obj = &#123;&#125;obj.x = 'Jnathan'obj.y = function() &#123;&#125;obj.hasOwnProperty('x') // trueobj.hasOwnProperty('y') // true æ–¹æ³•ä¹Ÿå±äºå±æ€§obj.hasOwnProperty('z') // false å±æ€§ä¸å­˜åœ¨obj.hasOwnProperty('toString') // false toStringæ˜¯ç»§æ‰¿çš„Objectä¸­çš„å±æ€§ï¼Œobjè‡ªèº«å±æ€§ä¸­ä¸åŒ…å« 123456789101112function Person() &#123; this.name = 'Jnathan'&#125;Person.prototype = &#123; constructor: Person, job: 'student',&#125;var Jnathan = new Person()Object.defineProperty(Jnathan, \"gender\", &#123; value: 'female', enumerable: false&#125;) ä»¥ä¸Šï¼Œ ç”¨definePropertyä¸ºå¯¹è±¡Jnathanå®šä¹‰äº†ä¸€ä¸ªåä¸ºgenderçš„ä¸å¯æšä¸¾å±æ€§ æšä¸¾ forâ€¦in 123456789101112131415161718192021222324for (let item in Jnathan) &#123; console.log('Jnathan.' + item + ' = ' + Jnathan[item])&#125;// Jnathan.name = Jnathan// Jnathan.constructor = function Person() &#123;// this.name = 'Jnathan'// &#125;// Jnathan.job = studentfunction enumer() &#123; this.a = 'æˆ‘æ˜¯å¯¹è±¡æœ¬èº«å°±æœ‰çš„å±æ€§'&#125;enumer.prototype.b = 'æˆ‘æ˜¯é€šè¿‡åŸå‹å¯¹è±¡æŒ‚è½½çš„å±æ€§'let fn = new enumer()Object.defineProperty(fn, 'c', &#123; value: 'æˆ‘æ˜¯é€šè¿‡Object.definePropertyæ–¹æ³•æ·»åŠ çš„å¯æšä¸¾å±æ€§', enumerable: true&#125;);for(let item in fn) &#123; console.log(item)&#125;// a// b// c æšä¸¾ Object.keys() 1234567891011121314Object.keys(Jnathan)// [\"name\"]function enumer() &#123; this.a = 'æˆ‘æ˜¯å¯¹è±¡æœ¬èº«å°±æœ‰çš„å±æ€§'&#125;enumer.prototype.b = 'æˆ‘æ˜¯é€šè¿‡åŸå‹å¯¹è±¡æŒ‚è½½çš„å±æ€§'let fn = new enumer()Object.defineProperty(fn, 'c', &#123; value: 'æˆ‘æ˜¯é€šè¿‡Object.definePropertyæ–¹æ³•æ·»åŠ çš„å¯æšä¸¾å±æ€§', enumerable: true&#125;);console.log(Object.keys(fn))// [\"a\", \"c\"] æšä¸¾ JSON.stringify() 1234567891011121314JSON.stringify(Jnathan)// \"&#123;\"name\":\"Jnathan\"&#125;\"function enumer() &#123; this.a = 'æˆ‘æ˜¯å¯¹è±¡æœ¬èº«å°±æœ‰çš„å±æ€§'&#125;enumer.prototype.b = 'æˆ‘æ˜¯é€šè¿‡åŸå‹å¯¹è±¡æŒ‚è½½çš„å±æ€§'let fn = new enumer()Object.defineProperty(fn, 'c', &#123; value: 'æˆ‘æ˜¯é€šè¿‡Object.definePropertyæ–¹æ³•æ·»åŠ çš„å¯æšä¸¾å±æ€§', enumerable: true&#125;)console.log(JSON.stringify(fn))// &#123;\"a\":\"æˆ‘æ˜¯å¯¹è±¡æœ¬èº«å°±æœ‰çš„å±æ€§\",\"c\":\"æˆ‘æ˜¯é€šè¿‡Object.definePropertyæ–¹æ³•æ·»åŠ çš„å¯æšä¸¾å±æ€§\"&#125; æ ¹æ®ç°è±¡æœ‰ä»¥ä¸‹æ€»ç»“forâ€¦in å¯ä»¥æšä¸¾å¯¹è±¡æœ¬èº«å…·æœ‰çš„å±æ€§ï¼Œé€šè¿‡Object.defineProperty()æ–¹æ³•åŠ çš„å¯æšä¸¾å±æ€§ï¼Œæˆ–è€…é€šè¿‡åŸå‹å¯¹è±¡ç»‘å®šçš„å¯ä»¥æšä¸¾å±æ€§Object.keys() å¯ä»¥æšä¸¾å¯¹è±¡æœ¬èº«çš„å±æ€§å’Œé€šè¿‡Object.defineProperty()æ·»åŠ çš„å¯æšä¸¾å±æ€§JSON.stringify() å¯ä»¥æšä¸¾å¯¹è±¡æœ¬èº«çš„å±æ€§å’Œé€šè¿‡Object.defineProperty()æ·»åŠ çš„å¯æšä¸¾å±æ€§ï¼Œå¹¶åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸² !== undefined 1234567var obj = &#123;x: 1, y: undefined, z: null&#125;console.log(obj.x !== undefined) // true å±æ€§å­˜åœ¨console.log(obj.y !== undefined) // false æ­¤æ—¶ä¼šå‡ºç°æ­§ä¹‰ï¼Œä¸èƒ½å‡†ç¡®åˆ¤æ–­å±æ€§æ˜¯ä¸å­˜åœ¨è¿˜æ˜¯å±æ€§å€¼æœ¬èº«å°±ä¸ºundefinedconsole.log(obj.z !== undefined) // true å±æ€§å­˜åœ¨console.log(obj.z != undefined) // false != ä¸èƒ½åŒºåˆ†undefinedå’Œnullï¼Œå°†ä¸¤è€…åŒç­‰å¯¹å¾…console.log(obj.w !== undefined) // false å±æ€§ä¸å­˜åœ¨console.log(obj.toString !== undefined) // true å­˜åœ¨toStringå‡½æ•°å±æ€§ã€‚ in è‡ªèº«å­˜åœ¨çš„å±æ€§æˆ–è€…ç»§æ‰¿çš„å±æ€§å‡è¿”å›true 123456var obj = &#123;x: 1, y: undefined, z: null&#125;console.log(\"x\" in obj) // true å±æ€§å­˜åœ¨console.log(\"y\" in obj) // true å±æ€§å­˜åœ¨console.log(\"z\" in obj) // true å±æ€§å­˜åœ¨console.log(\"w\" in obj) // false å±æ€§ä¸å­˜åœ¨console.log(\"toString\" in obj) // true å±æ€§å­˜åœ¨ Object.defineProperty() å‚æ•°ï¼šObject.defineProperty(object, propertyname, descriptor)object å¿…éœ€ã€‚ è¦åœ¨å…¶ä¸Šæ·»åŠ æˆ–ä¿®æ”¹å±æ€§çš„å¯¹è±¡ã€‚ è¿™å¯èƒ½æ˜¯ä¸€ä¸ªæœ¬æœº JavaScript å¯¹è±¡ï¼ˆå³ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡æˆ–å†…ç½®å¯¹è±¡ï¼‰æˆ– DOM å¯¹è±¡ã€‚propertyname å¿…éœ€ã€‚ ä¸€ä¸ªåŒ…å«å±æ€§åç§°çš„å­—ç¬¦ä¸²ã€‚descriptor å¿…éœ€ã€‚ å±æ€§æè¿°ç¬¦ã€‚ å®ƒå¯ä»¥é’ˆå¯¹æ•°æ®å±æ€§æˆ–è®¿é—®å™¨å±æ€§ã€‚è¿”å›å€¼ï¼šå·²ä¿®æ”¹å¯¹è±¡ å½“å¯¹è±¡ä¸å…·æœ‰æŒ‡å®šçš„å±æ€§åç§°æ—¶ï¼Œå‘å¯¹è±¡æ·»åŠ æ–°å±æ€§ã€‚å½“å¯¹è±¡å·²å…·æœ‰æŒ‡å®šçš„å±æ€§åç§°æ—¶ï¼Œä¿®æ”¹ç°æœ‰å±æ€§çš„ç‰¹æ€§ã€‚ 12345678910var obj = &#123;&#125;Object.defineProperty(obj, \"newDataProperty\", &#123; value: 101, writable: false, enumerable: false, configurable: true&#125;);obj.newDataProperty = 102console.log(obj.newDataProperty) // 101 whiteableä¸ºfalse åªè¯»ï¼Œä¸èƒ½ä¿®æ”¹ Object.getOwnPropertyNames ç”±äºobjçš„å±æ€§newDataPropertyæ˜¯ä¸å¯æšä¸¾çš„ï¼Œä½¿ç”¨forâ€¦inä¸èƒ½æ‰¾åˆ°newDataPropertyå±æ€§ 123for (let item in obj) &#123; console.log(item, obj[item]) // æ— è¾“å‡º&#125; æ­¤æ—¶å¯ä»¥ä½¿ç”¨Object.getOwnPropertyNamesæ¥éå† 12345var names = Object.getOwnPropertyNames(obj)for (let i = 0; i &lt; names.e]length; names++) &#123; console.log(names, i, names[i])&#125;// [\"newDataProperty\"] 0 newDataProperty 12345678910111213141516171819var obj = &#123;&#125;Object.defineProperty(obj, \"newAccessorProperty\", &#123; set: function (x) &#123; console.log(\"in property set accessor\"); this.newaccpropvalue = x; &#125;, get: function () &#123; console.log(\"in property get accessor\"); return this.newaccpropvalue; &#125;, enumerable: true, configurable: true&#125;);obj.newAccessorProperty = 30console.log(\"Property value: \" + obj.newAccessorProperty)// in property set accessor// in property get accessor// Property value: 30 ä¿®æ”¹DOMä¸Šçš„å±æ€§ 12Object.getOwnPropertyDescriptor(Element.prototype, \"querySelector\")// &#123;value: Æ’, writable: true, enumerable: true, configurable: true&#125; 1234567891011var descriptor = Object.getOwnPropertyDescriptor(Element.prototype, \"querySelector\")descriptor.value = \"query\"descriptor.writable = falseObject.defineProperty(Element.prototype, \"querySelector\", descriptor)var elem = document.getElementById(\"div\")elem.querySelector = \"anotherQuery\" // whitable ä¸ºfalse æ›´æ”¹ä¸ç”Ÿæ•ˆconsole.log(elem.querySelector) // query","comments":true,"tags":[]},{"title":"æ—¥å¿—å†…å®¹ã€äºŒã€‘","date":"2019-05-26T06:08:31.000Z","path":"2019/05/26/multiple-diary2/","text":"1. substr() å’Œ substring() substr stringObject.substr(startIndex[, length]) 12345678var str = â€˜abcdefg'str.substr(2) // â€˜cdefgâ€™str.substr(-1) =&gt; str.substr(6) // â€˜fgâ€™str.substr(6) // â€˜'str.substr(2,2) // â€˜cdâ€™str.substr(2,7) // â€˜cdefgâ€™str.substr(2,-1) // '' substring stringObject.substring(startIndex[, stop]) æ³¨æ„stopçš„å«ä¹‰ 1234567var str = â€˜abcdefg'str.substring(2) // â€˜cdefgâ€™str.substring(2,4) // â€˜cdâ€™str.substring(2,9) // â€˜cdefgâ€™str.substring(-2) =&gt; str.substring(0) // â€˜abcdefgâ€™str.substring(2,-4) =&gt; str.substring(2,0) =&gt; str.substring(0,2) // â€˜ab' 2. slice() å’Œ splice() slice stringObject.slice(startIndex[, stop])arrayObject.slice(startIndex[, stop])stop ç¼ºçœæ—¶ é»˜è®¤ä¸€ç›´åˆ°æœ€å 12345678910111213var str = â€˜abcdefgâ€™str.slice(2) // â€˜cdefg'str.slice(0) // â€˜abcdefgâ€™str.slice(-2) =&gt; str.slice(5) // â€˜fgâ€™str.slice(8) // â€˜â€™ ç©ºä¸² str.slice(2,4) // â€˜cdâ€™str.slice(2,6) // â€˜cdefâ€™str.slice(2,18) // â€˜cdefgâ€™str.slice(4,2) // â€˜â€™ ç©ºä¸²str.slice(4,-1) =&gt; str.slice(4,6) // â€˜efâ€™// æ•°ç»„æ–¹æ³•ç±»ä¼¼ splice arrayObject.splice(startIndex, length[, item1, item2â€¦])spliceæ“ä½œä¼šæ”¹å˜åŸæ•°ç»„ è¿”å›è¢«ç§»é™¤çš„å…ƒç´ æ•°ç»„ 12345678var arr = [â€˜aâ€™,â€™bâ€™,â€™câ€™,â€™dâ€™,â€™eâ€™,â€™fâ€™,â€™gâ€™]arr.splice(2,0) // ç©ºæ•°ç»„ arr = [â€˜aâ€™,â€™bâ€™,â€™câ€™,â€™dâ€™,â€™eâ€™,â€™fâ€™,â€™gâ€™]arr.splice(2,8) // arr = [â€˜aâ€™, â€˜bâ€™, â€˜c']arr.splice(2,-5) // è¿”å›arr arræ²¡æœ‰å˜åŒ–arr.splice(8,2) // è¿”å›arr arræ²¡æœ‰å˜åŒ–arr.splice(2,2,'11',â€™22') // è¿”å›[â€˜aâ€™, â€˜bâ€™, â€™11â€™, â€™22â€™, â€˜eâ€™, â€˜fâ€™, â€˜gâ€™] arr = [â€˜câ€™, â€˜d'] 3. æ£€æµ‹æ•°æ®ç±»å‹ typeof typeof æ˜¯è§£é‡Šå™¨å†…éƒ¨å®ç°ï¼Œæ ¹æ® ECMA-262 è§„å®šçš„å‡ ç§ç±»å‹çš„å€¼æ¥è¿”å›ç±»å‹åç§°ã€‚ä½†æ˜¯ typeof çš„åº”ç”¨åœºæ™¯éå¸¸æœ‰é™ï¼ŒåŸºæœ¬ä¸Šåªèƒ½åˆ¤æ–­å‡ºæ¥ä½¿ç”¨å­—é¢é‡æ–¹å¼èµ‹å€¼çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚ 12345678910typeof 23 // numbertypeof '124' // stringtypeof true // booleantypeof undefined // undefinedtypeof &#123;&#125; // objecttypeof null // objecttypeof [1, 3, 8] // objecttypeof function fn () &#123;&#125; // functiontypeof (new Number(33)) // objecttypeof (new String('hello')) // object ä»ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œ typeof æ£€æµ‹å‡ºæ¥çš„ç±»å‹ä¸å¤Ÿå‡†ç¡®ï¼Œå…·æœ‰ç›¸å½“å¤§çš„å±€é™æ€§ã€‚ instanceof instance æ£€æµ‹ç±»å‹çš„åŸç†å¤§è‡´ä¸º: åˆ¤æ–­å·¦è¾¹çš„å¯¹è±¡çš„éšå¼åŸå‹ proto æ˜¯å¦å’Œå³è¾¹å¯¹è±¡çš„æ˜¾å¼åŸå‹ prototype ç›¸ç­‰ã€‚ å¾ˆåƒ new æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥åˆ¤æ–­æŒ‡å®šçš„æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚ instance çš„å±€é™æ€§åº”è¯¥æ˜¯ä¸èƒ½æ£€æµ‹åŸºæœ¬æ•°æ®ç±»å‹ã€‚å¦å¤–ä¸€ç‚¹ï¼Œä¸åŒ window æˆ–è€… iframe ä¹‹é—´å¯¹è±¡ç±»å‹æ£€æµ‹ä¸èƒ½ä½¿ç”¨ instanceof æ¥æ£€æµ‹ã€‚ 1234567'123' instance String // falseNumber instanceof Number // truenew String('hello') instance String // truenew Number(33) instance Number // true Object.prototype.toString 1234567891011121314151617Object.prototype.toString.call(33) // [object Number]Object.prototype.toString.call('hello') // [object String]Object.prototype.toString.call([]) // [object Array]Object.prototype.toString.call(&#123;&#125;) // [object Object]Object.prototype.toString.call(true) // [object Boolean]Object.prototype.toString.call(null) // [object null]Object.prototype.toString.call(undefined) // [object undefined]Object.prototype.toString.call(function fn () &#123;&#125;) // [object Function]Object.prototype.toString.call(new Number(33)) // [object Number] constructor constructor å±æ€§è¿”å›å¯¹åˆ›å»ºæ­¤å¯¹è±¡çš„æ•°ç»„å‡½æ•°çš„å¼•ç”¨ã€‚constructor ä¸èƒ½æ£€æµ‹å‡ºnullå’Œundefinedä¸¤ç§ï¼Œä¼šæŠ¥é”™ã€‚ 1234567891011121314151617181920(33).constructor == Number // true('hello'.constructor == String // true([]).constructor == Array // true(&#123;&#125;).constructor == Object // true(true).constructor == Boolean // true(null).constructor == null // TypeError: Cannot read property 'constructor' of null(undefined).constructor == undefined // TypeError: Cannot read property 'constructor' of undefinedvar fn = function () &#123;&#125;fn.constructor == Function // truevar number = new Number(66)number.constructor == Number // truenumber.constructor == Object // false æˆ‘æ˜¯åˆ†å‰²çº¿ Array.isArray() 4. ES5 Array Function forEach Array.forEach(callbackFn[, thisObj])callbackFn (value, index, arr)thisObj é»˜è®¤ä¸º window 123[1, 2, 5, 8].forEach( function (ele, index, arr) &#123; console.log(ele, index, arr)&#125;) map Array.map(callbackFn[, thisObj])callbackFn (value, index, arr) 123[1, 2, 5, 8].map(function (ele, index, arr) &#123; return ele * index // [0, 2, 10, 24]&#125;) filter Array.filter(callbackFn[, thisObj])callbackFn (value, index, arr), éœ€è¦è¿”å› Boolean å€¼ 1234567[0, 2, 5, 8].filter(function (ele, index, arr) &#123; return ele // [2, 5, 8]&#125;)[0, 2, 5, 1].filter(function (ele, index, arr) &#123; return ele &lt;= index // [0, 1]&#125;) some Array.some(callbackFn[, thisObj])callbackFn (value, index, arr) 123[1, 2, 5, 8].some(function (ele, index, arr) &#123; return ele &gt; 5 // true (8 &gt; 5)&#125;) every Array.every(callbackFn[, thisObj])callbackFn (value, index, arr) 123[1, 2, 5, 8].every(function (ele, index, arr) &#123; return ele &gt; 5 // false (1, 2, 5 å‡ä¸å¤§äº5)&#125;) indexOf Array.indexof(searchEle[, fromIndex])ç¬¬ä¸€ä¸ªå‡ºç°çš„ searchEle çš„ç´¢å¼•ä½ç½®searchEle è¦æŸ¥æ‰¾çš„å…ƒç´ fromIndex å¼€å§‹æŸ¥æ‰¾çš„ç´¢å¼•ä½ç½®ï¼Œç¼ºçœæˆ–ä¸ç¬¦åˆè§„èŒƒæ—¶ä¸º 0 1234[1, 2, 5, 8].indexOf(2) // 1[1, 2, 5, 8].indexOf(2, '0') // 1[1, 2, 5, 8].indexOf(2, 'f') =&gt; [1, 2, 5, 8].indexOf(2, 0) // 1[1, 2, 5, 8].indexOf(2, 2) // -1 lastIndexOf Array.lastIndexOf(searchEle[, fromIndex])ä¸ indexOf ä¸åŒåœ¨äºæ­¤æ–¹æ³•æ˜¯ä»åé¢å…ƒç´ å¼€å§‹æŸ¥æ‰¾çš„searchEle è¦æŸ¥æ‰¾çš„å…ƒç´ fromIndex å¼€å§‹æŸ¥æ‰¾çš„ç´¢å¼•ä½ç½®ï¼Œç¼ºçœæ—¶æˆ–å¤§äºç­‰äº Array.length ä¸º Array.length - 1 123456[1, 2, 5, 8, 5].lastIndexOf(5) // 4[1, 2, 5, 8, 5].lastIndexOf(5, 4) // 4[1, 2, 5, 8, 5].lastIndexOf(5, 8) =&gt; [1, 2, 5, 8, 5].lastIndexOf(5, 4) // 4[1, 2, 5, 8, 5].lastIndexOf(5, 'f') // -1[1, 2, 5, 8, 5].lastIndexOf(5, 3) // 2[1, 2, 5, 8, 5].lastIndexOf(5, 1) // -1 reduce Array.reduce(callbackFn[, initValue])callbackFn(previous, current, index, arr)previous å‰ä¸€æ¬¡è¿­ä»£è®¡ç®—å‡ºæ¥çš„å€¼current å½“å‰è¿­ä»£çš„å€¼initValue åˆå§‹å€¼, æœªæŒ‡å®šæ—¶å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´  123[1, 2, 5, 8].reduce(function (preV, curV, index, arr) &#123; return preV + curV&#125;, 10) // 26 123456789101112131415// æ¢³ç†ä¸€ä¸‹è®¡ç®—è¿‡ç¨‹ï¼š// åˆå§‹åŒ–çš„æ—¶å€™preV = initValue = 10, curV = 1, index = 0// ç¬¬ä¸€æ¬¡è®¡ç®—preV = 10 + 1 = 11, curV = 2, index = 1// ç¬¬äºŒæ¬¡è®¡ç®—preV = 11 + 2 = 13, curV = 5, index = 2// ç¬¬ä¸‰æ¬¡è®¡ç®—preV = 13 + 5 = 18, curV = 8, index = 3// ç¬¬å››æ¬¡è®¡ç®—preV = 18 + 8 = 26, curV = undefined (é€€å‡º) reduceRight å’Œ reduceRight ç”¨æ³•åŸºæœ¬ä¸€è‡´ï¼Œä¸è¿‡æ˜¯ä»æ•°ç»„åé¢å¼€å§‹è¿­ä»£çš„Array.reduceRight(callbackFn[, initValue])callbackFn(previous, current, index, arr)previous å‰ä¸€æ¬¡è¿­ä»£è®¡ç®—å‡ºæ¥çš„å€¼current å½“å‰è¿­ä»£çš„å€¼ 123456[1, 2, 5, 8].reduceRight(function (preV, curV, index, arr) &#123; if (index == 0) &#123; return preV - curV &#125; return preV + curV&#125;, 10) // 24 123456789101112131415// æ¢³ç†ä¸€ä¸‹è®¡ç®—è¿‡ç¨‹ï¼š// åˆå§‹åŒ–çš„æ—¶å€™preV = initValue = 10, curV = 8, index = 3// ç¬¬ä¸€æ¬¡è®¡ç®—preV = 10 + 8 = 18, curV = 5, index = 2// ç¬¬äºŒæ¬¡è®¡ç®—preV = 18 + 5 = 23, curV = 2, index = 1// ç¬¬ä¸‰æ¬¡è®¡ç®—preV = 23 + 2 = 25, curV = 1, index = 0// ç¬¬å››æ¬¡è®¡ç®—preV = 25 - 1 = 24, curV = undefined (é€€å‡º) å‚è€ƒæ–‡ç« ","comments":true,"tags":[]},{"title":"webpack-study","date":"2019-05-23T07:29:00.000Z","path":"2019/05/23/webpack-study/","text":"webpack-dev-server-312345678910111213141516171819var devMiddleware = require('webpack-dev-middleware')(compiler, &#123; publicPath: webpackConfig.output.publicPath, hot: true, stats: &#123; colors: true, chunks: false &#125;&#125;)// use expressapp.use(devMiddleware)app.listen(port, host, function (err) &#123; if (err) &#123; console.log(err) return &#125; console.log('Listening at ' + host + ':' + port + '\\n')&#125;) CommonsChunkPlugin123456789101112131415161718192021// webpack.config.jsvar webpack = require(â€˜webpackâ€™)entry: &#123; vendor: ['jquery', 'lodash'], vuecore: './vuecore.js'&#125;, plugins: [ // new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js'), // new webpack.optimize.CommonsChunkPlugin(&#123; // name: 'vuecore', // filename: 'vuecore.js' // &#125;), // Error: CommonsChunkPlugins: While running in normal mode its not allowed to use a non-entry chunk (vuecore) // doing this instaed new webpack.optimize.CommonsChunkPlugin(&#123; names: ['vuecore','vendor'] &#125;), new webpack.optimize.CommonsChunkPlugin('vendor', 'vendor.bundle.js')]","comments":true,"tags":[{"name":"webpack","slug":"webpack","permalink":"https://JnathanCoder.github.io/tags/webpack/"}]},{"title":"æ—¥å¿—å†…å®¹ã€ä¸€ã€‘","date":"2019-05-22T09:43:43.000Z","path":"2019/05/22/multiple-diary/","text":"1. setTimeoutä¸­æ–¹æ³•ä½“æ·»åŠ å¼•å·ä¸ä¸æ·»åŠ å¼•å·çš„åŒºåˆ« æ·»åŠ å¼•å·çš„æƒ…å†µï¼Œè°ƒç”¨çš„å‡½æ•°æ˜¯å…¨å±€èŒƒå›´çš„ã€‚æœªæ·»åŠ å¼•å·çš„æƒ…å†µï¼Œè°ƒç”¨çš„æ˜¯å±€éƒ¨èŒƒå›´çš„ã€‚ 1234567891011121314151617var testFn = function () &#123; console.info('hello from global')&#125;var fn = function () &#123; var testFn = function () &#123; console.info('hello fron inner') &#125; setTimeout('testFn()', 1000) // hello form global setTimeout(testFn, 1000) // hello from inner // åœ¨fn()å‡½æ•°å†…éƒ¨æ²¡æœ‰å®šä¹‰testFnçš„æ—¶å€™ï¼Œä¼šå‘ä¸Šå¯»æ‰¾testFnï¼Œè¿™é‡Œæ‰¾åˆ°äº†å…¨å±€å‡½æ•°ï¼Œæ‰§è¡Œæ•ˆæœï¼š setTimeout(testFn, 1000) // hello from global&#125;fn() 2. AMD/CMDè§„èŒƒ common.jscommon.js è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œå› ä¸ºæ¨¡å—å°±åœ¨ç£ç›˜ä¸Šï¼Œæ‰€ä»¥åŠ è½½æ—¶é—´å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå±äºåŒæ­¥åŠ è½½ã€‚ [å…¸å‹ä»£è¡¨ node.js]AMDä¸CMDéƒ½å±äºå¼‚æ­¥åŠ è½½ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨ç«¯ã€‚AMD æ¨å´‡ä¾èµ–å‰ç½®ï¼Œå®šä¹‰æ¨¡å—çš„æ—¶å€™å°±éœ€è¦ç”³æ˜éœ€è¦ä¾èµ–çš„æ¨¡å— [å…¸å‹ä»£è¡¨ require.js]CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™æ‰å»requireç›¸å…³æ¨¡å— [å…¸å‹ä»£è¡¨ sea.js] 3. stopPropagation() ä»¥åŠ stopImmediatePropagation()stopImmediatePropagation ç”¨äºé˜»æ­¢å†’æ³¡ï¼Œåœ¨æ‰§è¡Œå®Œå½“å‰å…ƒç´ ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºä¹‹åï¼Œåœæ­¢å½“å‰å…ƒç´ ä»¥åŠåç»­å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åº stopPropagation åŒæ ·ä¹Ÿæ˜¯ç”¨äºé˜»æ­¢å†’æ³¡ï¼Œåœ¨æ‰§è¡Œå®Œç»‘å®šåˆ°å½“å‰å…ƒç´ ä¸Šçš„æ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºä¹‹åï¼Œåœæ­¢åç»­å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åº åŒä¸€ä¸ªå…ƒç´ ç”¨onç»‘å®šå¤šæ¬¡åŒæ ·äº‹ä»¶æ—¶ï¼ˆä¾‹å¦‚clickï¼‰ï¼Œæœ€åä¸€æ¬¡ä¼šè¦†ç›–ä¹‹å‰çš„äº‹ä»¶ï¼Œä¸ä¼šæ‰§è¡Œå‰é¢ã€‚è€Œç”¨addEventListenerç»‘å®šå¤šæ¬¡åŒæ ·äº‹ä»¶æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œã€‚ 12345&lt;div id=\"large\" style=\"width: 150px; height: 150px; background: orange\"&gt; &lt;div id=\"middle\" style=\"width: 100px; height: 100px; background: cadetblue\"&gt; &lt;div id=\"small\" style=\"width: 50px; height:50px; background: coral\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546(function()&#123; var large = document.getElementById('large') var middle = document.getElementById('middle') var small = document.getElementById('small') large.addEventListener('click', function()&#123; alert('large div is clicked') &#125;) middle.addEventListener('click', function()&#123; alert('middle div is clicked') &#125;) // ç¬¬ä¸€ç§æƒ…å†µï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šä¾æ¬¡å¼¹å‡ºä¸‰ä¸ªçª—å£ï¼Œè¿™æ˜¯å› ä¸ºå‘ä¸Šå†’æ³¡äº§ç”Ÿçš„ small.addEventListener('click', function()&#123; alert('small div is clicked') &#125;) // ç¬¬äºŒç§æƒ…å†µï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šå¼¹å‡ºå››ä¸ªçª—å£ // small.addEventListener('click', function()&#123; // alert('small-1 is clicked') // &#125;) // small.addEventListener('click', function()&#123; // alert('small-2 is clicked') // &#125;) // ç¬¬ä¸‰ç§æƒ…å†µï¼Œæ·»åŠ stopPropagationï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šå¼¹å‡ºä¸¤ä¸ªçª—å£ // small-1 is clicked small-2 is clicked // small.addEventListener('click', function(event)&#123; // alert('small-1 is clicked') // event.stopPropagation() // &#125;) // small.addEventListener('click', function()&#123; // alert('small-2 is clicked') // &#125;) // ç¬¬å››ç§æƒ…å†µï¼Œæ·»åŠ stopImmediatePropagationï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ // small-1 is clicked // èƒ½å¤Ÿå¾ˆæ˜æ˜¾çœ‹åˆ°ä¸stopPropagationçš„åŒºåˆ«ï¼Œè°ƒç”¨stopImmediatePropagationä¹‹åï¼Œç¬¬äºŒä¸ªå®šä¹‰çš„clickäº‹ä»¶ä¹Ÿè¢«å–æ¶ˆè€Œä¸è¢«æ‰§è¡Œäº†ã€‚ // small.addEventListener('click', function(event)&#123; // alert('small-1 is clicked') // event.stopImmediatePropagation() // &#125;) // small.addEventListener('click', function()&#123; // alert('small-2 is clicked') // &#125;)&#125;)() (function(){ var large = document.getElementById('large') var middle = document.getElementById('middle') var small = document.getElementById('small') large.addEventListener('click', function(){ alert('large div is clicked') }) middle.addEventListener('click', function(){ alert('middle div is clicked') }) // ç¬¬ä¸€ç§æƒ…å†µï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šä¾æ¬¡å¼¹å‡ºä¸‰ä¸ªçª—å£ï¼Œè¿™æ˜¯å› ä¸ºå‘ä¸Šå†’æ³¡äº§ç”Ÿçš„ small.addEventListener('click', function(){ alert('small div is clicked') }) // ç¬¬äºŒç§æƒ…å†µï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šå¼¹å‡ºå››ä¸ªçª—å£ // small.addEventListener('click', function(){ // alert('small-1 is clicked') // }) // small.addEventListener('click', function(){ // alert('small-2 is clicked') // }) // ç¬¬ä¸‰ç§æƒ…å†µï¼Œæ·»åŠ stopPropagationï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šå¼¹å‡ºä¸¤ä¸ªçª—å£ // small-1 is clicked small-2 is clicked // small.addEventListener('click', function(event){ // alert('small-1 is clicked') // event.stopPropagation() // }) // small.addEventListener('click', function(){ // alert('small-2 is clicked') // }) // ç¬¬å››ç§æƒ…å†µï¼Œæ·»åŠ stopImmediatePropagationï¼š ç‚¹å‡»smallæ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ // small-1 is clicked // èƒ½å¤Ÿå¾ˆæ˜æ˜¾çœ‹åˆ°ä¸stopPropagationçš„åŒºåˆ«ï¼Œè°ƒç”¨stopImmediatePropagationä¹‹åï¼Œç¬¬äºŒä¸ªå®šä¹‰çš„clickäº‹ä»¶ä¹Ÿè¢«å–æ¶ˆè€Œä¸è¢«æ‰§è¡Œäº†ã€‚ // small.addEventListener('click', function(event){ // alert('small-1 is clicked') // event.stopImmediatePropagation() // }) // small.addEventListener('click', function(){ // alert('small-2 is clicked') // }) })() 4. jsäº‹ä»¶ä¸­çš„ä¸‰ä¸ªé˜¶æ®µä¸‰ä¸ªé˜¶æ®µåˆ†åˆ«ä¸ºæ•è·é˜¶æ®µ ç›®æ ‡é˜¶æ®µ å†’æ³¡é˜¶æ®µelement.addEventListener(type, fn[, useCapture])useCapture - æŒ‡å®šäº‹ä»¶å¥æŸ„åœ¨æ•è·é˜¶æ®µæˆ–è€…å†’æ³¡é˜¶æ®µæ‰§è¡Œï¼Œ é»˜è®¤false(äº‹ä»¶å¥æŸ„åœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œ)ï¼Œè®¾ç½®ä¸ºtrue(äº‹ä»¶å¥æŸ„åœ¨æ•è·é˜¶æ®µæ‰§è¡Œ)ã€‚ æ•è·é˜¶æ®µ ç›®æ ‡é˜¶æ®µ å†’æ³¡é˜¶æ®µ 5. å¸¸è§çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µ css spritesï¼ˆé›ªç¢§å›¾ï¼‰ é¿å…ä½¿ç”¨cssè¡¨è¾¾å¼ cssæ ·å¼è¡¨æ”¾åœ¨é¡µé¢é¡¶éƒ¨ï¼Œè„šæœ¬æ”¾åœ¨é¡µé¢åº•éƒ¨ å†…è”å›¾ç‰‡å’Œè„šæœ¬ä½¿ç”¨data:URLï¼ˆbase64ç¼–ç ï¼‰æ¨¡å¼ç›´æ¥åŒ…å«åœ¨é¡µé¢ä¸­ï¼Œæ— éœ€è¿›è¡Œhttpè¯·æ±‚ï¼Œç¼ºç‚¹ï¼šieä¸æ”¯æŒï¼Œå›¾ç‰‡å¤ªå¤§ä¸é€‚ç”¨ï¼Œä½¿ç”¨base64ä¼šå¢åŠ é¡µé¢ä½“ç§¯ï¼Œæµè§ˆå™¨ä¸ä¼šç¼“å­˜ ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œCDN å¼€å¯GZIPå‹ç¼©ï¼Œå¯ç”¨è´Ÿè½½å‡è¡¡ å¼€å¯keep aliveå‡å°‘ä¸æœåŠ¡å™¨é“¾æ¥æ¬¡æ•° ç¼ºç‚¹ï¼šä½¿æœåŠ¡å™¨è´Ÿè½½å¢å¤§ï¼Œä¹Ÿæ›´å®¹æ˜“é­å—æ”»å‡» ç²¾ç®€å‹ç¼©ä»£ç  uglifyjs é¿å…é‡å®šå‘ å¸¸è§çš„301 302 é…ç½®e-tags å’Œ expireså¤´ ä½¿ç”¨ç¼“å­˜ æŒ‰éœ€åŠ è½½èµ„æº 6. parseInt() ä»¥åŠ parseFloat() parseInt(string[, radix]) stringå¦‚æœä»¥â€˜oxâ€™æˆ–è€…â€™oXâ€™å¼€å¤´ï¼Œå°†ä»¥16è¿›åˆ¶è¿›è¡Œè§£æ radix è¦è§£æçš„æ•°å­—åŸºæ•°ï¼Œä»‹äº2-36ä¹‹é—´ å¦‚æœä¸ç»™å€¼æˆ–è€…ä¸º0ï¼Œåˆ™æŒ‰ç…§åŸºæ•°ä¸º10æ¥è®¡ç®— å¦‚æœå°äº2æˆ–è€…å¤§äº36ï¼Œåˆ™è¿”å›NaN å¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼æ˜¯å…è®¸çš„ å¦‚æœå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½è½¬æ¢æˆå¯¹åº”çš„æ•°å­—ï¼Œå°†è¿”å›NaN 12345678910111213141516171819parseInt('0x12') // 17parseInt('0x12', 2) // 0 =&gt; parseInt('0', 2)parseInt('0x12', 10) // 0 =&gt; parseInt('0', 16)parseInt('8') // =&gt; parseInt('8', 0) =&gt; parseInt('8', 10) // 8parseInt('8', 1) // NaNparseInt('8', 37) // NaNparseInt('a23') // NaNparseInt('2a3') // 2parseInt(' 23') // 23parseInt(' 23 ') // 23parseInt(' 2 3 ') // 2parseInt('11', 2) // 3parseInt(11, 2) // 3parseInt('1100', 2) // 12parseInt('21', 2) // NaN 2è¶…å‡ºäº†2è¿›åˆ¶æœ€å¤§å€¼1ï¼Œå¹¶ä¸”æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦parseInt('12', 2) // 1 2åŒæ ·è¶…å‡ºäº†2è¿›åˆ¶æœ€å¤§å€¼1ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦å¯ä»¥è½¬æ¢æˆäºŒè¿›åˆ¶parseInt('66', 8) // 6*8^1 + 6*8^0 = 48 + 6 = 54parseInt('12', 16) // 1*16^1 + 2*16^0 = 16 + 2 = 18[0, 1, 2, 3].map(parseInt) // [parseInt(0, 0), parseInt(1, 1), parseInt(2, 2), parseInt(3, 3)] =&gt; [0, NaN, NaN, NaN] parseFloat() parseInt(string[, radix]) è¿™é‡Œè¯­æ³•å¾…ä¿®æ”¹ å¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼æ˜¯å…è®¸çš„ å¦‚æœå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½è½¬æ¢æˆå¯¹åº”çš„æ•°å­—ï¼Œå°†è¿”å›NaN å¦‚æœåœ¨è§£æè¿‡ç¨‹ä¸­é‡åˆ°äº†æ­£è´Ÿå·ï¼ˆ+ æˆ– -ï¼‰ã€æ•°å­— (0-9)ã€å°æ•°ç‚¹ï¼Œæˆ–è€…ç§‘å­¦è®°æ•°æ³•ä¸­çš„æŒ‡æ•°ï¼ˆe æˆ– Eï¼‰ä»¥å¤–çš„å­—ç¬¦ï¼Œåˆ™å®ƒä¼šå¿½ç•¥è¯¥å­—ç¬¦ä»¥åŠä¹‹åçš„æ‰€æœ‰å­—ç¬¦ 7. charAt()ã€charCodeAt() å’Œ fromCharCode() charAt() String.charAt(index) è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦, ç´¢å¼•å€¼ index &lt; 0 æˆ–è¶…å‡ºäº†èŒƒå›´åˆ™è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸² 123'abc'.charAt(1) // 'b''abc'.charAt(-2) // '''abc'.charAt(5) // '' charCodeAt() String.charCodeAt(index) è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦çš„ unicode æ•°å€¼ [0, 1114111] å¼€å¤´çš„ 128 ä¸ª unicode ç¼–ç å•å…ƒå’Œ ASCII å­—ç¬¦ç¼–ç ä¸€æ · ç´¢å¼•å€¼ index &lt; 0 æˆ–è¶…å‡ºäº†èŒƒå›´åˆ™è¿”å›ä¸€ä¸ª NaN, å¤§äº 255 çš„æ˜¯ä¸­æ–‡ 12345'AabcdD'.charCodeAt(0) // 65'AabcdD'.charCodeAt(1) // 97'AabcdD'.charCodeAt(-1) // NaN'AabcdD'.charCodeAt(8) // NaN'ä¸­å›½'.charCodeAt(1) // 22269 fromCharCode() String.fromCharCode(num1, num2, num3, â€¦) æ ¹æ®æŒ‡å®šçš„ unicode ç¼–ç ä¸­çš„åºå·å€¼æ¥è¿”å›å­—ç¬¦ä¸² 1String.fromCharCode(65, 66, 97) // 'ABa' 8. åŸç”Ÿajax12345678910var xhr = new XMLHttpRequest()// è¯·æ±‚æ–¹å¼ è¯·æ±‚è·¯å¾„ æ˜¯å¦å¼‚æ­¥å‘é€è¯·æ±‚xhr.open('GET', 'http://www.jnathan.cn/jnathan/effect/authKit.js', true)xhr.send('hello world') xhr.onreadystatechange = function () &#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; // alert(xhr.responseText) &#125;&#125; 9. æœ‰ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œå‡å®šå…¨éƒ¨ä¸ºæ•´æ•°ï¼Œå…¶ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°å¶æ•°æ¬¡ï¼Œæ‰¾å‡ºå‡ºç°äº†å¥‡æ•°æ¬¡çš„é‚£ä¸ªæ•°å­—ã€‚ æ—¶é—´å¤æ‚åº¦ä¸ºO(n) ç©ºé—´å¤æ‚åº¦O(1)åˆ©ç”¨äº†n ^ n = 0, n ^ 0 = nä¸¤ä¸ªç­‰å¼çš„åŸç†ã€‚å¾ªç¯å¯¹æ•°ç»„æ•°å­—è¿›è¡Œå¼‚æˆ–è®¡ç®—ï¼Œå³ 0 ^ arr[0] ^ arr[1] ^ ... ^ arr[n - 1] ï¼Œå¼‚æˆ–è®¡ç®—æ»¡è¶³äº¤æ¢å¾‹åŸåˆ™ï¼Œå¦‚æœæ•°ç»„å…ƒç´ å‡ºç°äº†ç›¸åŒçš„æƒ…å†µï¼Œå¯ä»¥ç§»åŠ¨åˆ°ä¸€èµ·å…ˆè¿›è¡Œè®¡ç®—ï¼Œå¦‚æœå‡ºç°äº†å¶æ•°æ¬¡ï¼Œå…¶ç»“æœä¸º 0ï¼Œå‡ºç°äº†å¥‡æ•°æ¬¡çš„æ•°å…¶ç»“æœä¸ºè¯¥æ•°å­—ï¼Œæ‰€ä»¥è¡¨è¾¾å¼æœ€åå¾—å‡ºæ¥çš„ç»“æœå³ä¸ºæ•°ç»„æ‰€æœ‰å‡ºç°äº†å¥‡æ•°æ¬¡å…ƒç´ çš„å¼‚æˆ–æ“ä½œçš„ç»“æœã€‚æ¯”å¦‚ï¼š[1,2,2,3,4,4]è¿›è¡Œå¼‚æˆ–æ“ä½œå¾—åˆ°çš„ç»“æœæ˜¯ 1 ^ 3 = 2 ï¼Œç‰¹æ®Šæƒ…å†µä¸‹ï¼ˆåªæœ‰ä¸€ä¸ªæ•°å­—å‡ºç°äº†å¥‡æ•°æ¬¡ï¼‰ï¼Œé‚£ä¹ˆæœ€åçš„ç»“æœå°±æ˜¯å‡ºç°äº†å¥‡æ•°æ¬¡çš„é‚£ä¸ªæ•°å­—ï¼ï¼ 123456789function fn7 (arr) &#123; var oddTimesNumber = 0 for (let i in arr) &#123; oddTimesNumber = oddTimesNumber ^ arr[i] &#125; return oddTimesNumber&#125;fn7([1,2,3,4,5,4,4,3,2,1,1,1]) // 3 10. é€’å½’æ±‚1-10çš„å’Œ123456789101112function getSum(nextArr, curSum = 0) &#123; var sum = nextArr[0] + curSum if (nextArr.length == 1) &#123; return sum &#125; else &#123; return getSum(nextArr.slice(1), sum) &#125;&#125;getSum([1,2,3,4,5,6,7,8,9,10]) 11. å»é™¤æ•°ç»„é‡å¤å…ƒç´  ç›´æ¥åŒå±‚å¾ªç¯æ¯”è¾ƒ 123456789101112131415161718192021222324function unique (arr) &#123; var result = [] var isRepeat for (var i = 0; i &lt; arr.length; i++) &#123; isRepeat = false // é»˜è®¤ä¸é‡å¤ï¼Œè¿›è¡Œpushæ“ä½œï¼Œå½“åˆ¤æ–­é‡å¤æ—¶ä¸æ“ä½œ for (var j = 0; j &lt; result.length; j++) &#123; if (arr[i] === result[j]) &#123; isRepeat = true break &#125; &#125; if (!isRepeat) &#123; result.push(arr[i]) &#125; &#125; return result&#125;unique([1,1,2,3,4]) åˆ©ç”¨indexOf()ï¼Œ ä½†æ˜¯indexOfä¼šä¸€ç›´å¾ªç¯åˆ°æ‰¾åˆ°ç›®æ ‡ä¸ºæ­¢ï¼Œæµªè´¹äº†æ—¶é—´ 12345678910111213function unique (arr) &#123; var result = [] for (var i = 0; i &lt; arr.length; i++) &#123; if (result.indexOf(arr[i]) === -1) &#123; result.push(arr[i]) &#125; &#125; return result&#125;unique([1,1,2,3,4]) æœ€å¿«çš„æ–¹æ³• æŠŠå·²ç»å‡ºç°è¿‡çš„å…ƒç´ é€šè¿‡ä¸‹æ ‡çš„å½¢å¼å­˜å…¥ä¸€ä¸ªObjectå†…ã€‚ä¸‹æ ‡çš„å¼•ç”¨çš„å®ç°åŸç†åˆ©ç”¨çš„æ˜¯å“ˆå¸Œç®—æ³•ï¼Œè¦æ¯”ç”¨indexOf()æœç´¢æ•°ç»„å¿«çš„å¤šã€‚ç”±äºå¤šäº†ä¸€ä¸ªhashè¡¨ï¼Œå ç”¨çš„å†…å­˜ä¼šæ›´å¤šï¼Œç©ºé—´æ¢æ—¶é—´åšæ³• 1234567891011121314function unique (arr) &#123; // hashObjä¸ºhashè¡¨ï¼Œresultä¸ºä¸´æ—¶æ•°ç»„ var hashObj = &#123;&#125;, result = [] for (var i = 0; i &lt; arr.length; i++) &#123; // å¦‚æœhashè¡¨ä¸­æ²¡æœ‰å½“å‰é¡¹ if (!hashObj[arr[i]]) &#123; // å­˜å…¥hashè¡¨ hashObj[arr[i]] = true // æŠŠå½“å‰æ•°ç»„çš„å½“å‰é¡¹pushåˆ°ä¸´æ—¶æ•°ç»„é‡Œé¢ result.push(arr[i]) &#125; &#125; return result&#125; æŠ˜è¡·æ–¹æ³• æ—¶é—´ä¸Šæ¯”indexOfå¿«ï¼Œæ¯”hashè¡¨çš„æ–¹å¼è¦æ…¢ã€‚å…ˆæŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åºï¼Œç„¶åæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå€¼å¤§å° 12345678910function unique (arr) &#123; arr.sort() var result = [arr[0]] for (var i = 1; i &lt; arr.length; i++) &#123; if (arr[i] !== result[result.length - 1]) &#123; result.push(arr[i]) &#125; &#125; return result&#125; es6çš„filter()æ–¹æ³• 1234567891011121314function unique (arr) &#123; return arr.filter( (value, index) =&gt; &#123; arr.indexOf(value) === index console.log(arr.indexOf(value), index) // 0 0 // 0 1 // 2 2 // 3 3 // 4 4 // 5 5 // 2 6 &#125;)&#125;unique([1,1,2,3,4,5,2]) 12. jquery é‡Œé¢çš„ $(document).ready(function(){}) å’Œ window.onload çš„åŒºåˆ« window.onloadéœ€è¦ç­‰åˆ°é¡µé¢ä¸­åŒ…æ‹¬å›¾ç‰‡åœ¨å†…çš„å…ƒç´ å…¨éƒ¨åŠ è½½å®Œæ¯•æ‰èƒ½æ‰§è¡Œï¼›ready()æ˜¯DOMå…ƒç´ ç»˜åˆ¶ç»“æŸä¹‹åå°±æ‰§è¡Œï¼Œä¸ç”¨ç­‰åˆ°åŠ è½½å®Œæ¯•ã€‚ window.onloadå¦‚æœå®šä¹‰äº†å¤šæ¬¡ï¼Œåˆ™åªä¼šæ‰§è¡Œä¸€ä¸ªï¼Œåè€…ä¼šè¦†ç›–å‰è€…ï¼› ready()å¯ä»¥åŒæ—¶ç¼–å†™å¤šä¸ªï¼Œå¹¶ä¸”éƒ½ä¼šæ‰§è¡Œã€‚ window.onloadæ²¡æœ‰ç®€åŒ–å†™æ³•ï¼›$(document).ready(function(){})å¯ä»¥ç®€åŒ–æˆ$(function(){})ã€‚ è¡¥å……ï¼š$(window).load(function(){})å’Œ window.onload()æ•ˆæœä¸€è‡´ã€‚ 13. æ¸è¿›å¢å¼ºä¸ä¼˜é›…é™çº§ æ¸è¿›å¢å¼º ä¸€å¼€å§‹å°±é’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œå®ŒæˆåŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†å¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’çš„ä¼˜åŒ–ï¼Œè¾¾åˆ°æ›´å¥½çš„ä½“éªŒã€‚ ä¼˜é›…é™çº§ ä¸€å¼€å§‹å°±æ„å»ºç«™ç‚¹çš„å®Œæ•´åŠŸèƒ½ï¼Œç„¶åé’ˆå¯¹æµè§ˆå™¨è¿›è¡Œæµ‹è¯•å’Œä¿®å¤ã€‚æ¯”å¦‚ä¸€å¼€å§‹ä½¿ç”¨CSS3çš„ç‰¹æ€§æ„å»ºäº†ä¸€ä¸ªåº”ç”¨ï¼Œç„¶åé€æ­¥é’ˆå¯¹å„å¤§ä½çº§æµè§ˆå™¨è¿›è¡Œhackä½¿å…¶å¯ä»¥åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šæ­£å¸¸æµè§ˆã€‚ 14. cookiesã€localStorageå’ŒsessionStorageçš„åŒºåˆ« cookieså­˜åœ¨äºå®¢æˆ·ç«¯ï¼Œå§‹ç»ˆä¼šåœ¨httpè¯·æ±‚ä¸­é€šè¿‡ Request Headers Cookieå¤´æºå¸¦ï¼Œå³ä½¿å½“å‰è¯·æ±‚ä¸éœ€è¦ä½¿ç”¨åˆ°cookieï¼›å¤§å°ä¸€èˆ¬åœ¨4KBï¼Œæ‰€ä»¥åªé€‚åˆä¿å­˜å¾ˆå°çš„æ•°æ®ï¼Œæ¯”å¦‚ä¼šè¯æ ‡è¯†ï¼›cookiesåœ¨æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆexpiresï¼‰çš„æ—¶å€™ï¼Œé»˜è®¤åœ¨å…³é—­æµè§ˆå™¨ä¹‹åå°±ä¼šè¢«æ¸…é™¤ï¼Œåœ¨æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ—¶å€™ï¼Œä¼šä¸€ç›´æŒç»­åˆ°è¿‡æœŸæ—¶é—´æœ‰æ•ˆï¼ˆå³ä½¿å…³é—­å½“å‰çª—å£æˆ–è€…å…³é—­æµè§ˆå™¨ï¼‰ã€‚ localStorage å’Œ sessionStorageä¸ä¼šå‘é€æ•°æ®åˆ°æœåŠ¡ç«¯ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ï¼›ä¹Ÿæœ‰å¤§å°çš„é™åˆ¶ï¼Œä½†ä¸€èˆ¬åœ¨5Må·¦å³ï¼›localStorageä¸€ç›´æœ‰æ•ˆï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼› sessionStorageåªåœ¨æµè§ˆå™¨å…³é—­ä¹‹å‰æœ‰æ•ˆã€‚ å¦å¤–ï¼š localStorage å’Œ cookies åœ¨åŒæºçš„æµè§ˆå™¨çª—å£ä¹‹é—´æ˜¯å…±äº«çš„ï¼ŒsessionStorageä¸å…±äº«ï¼Œå› æ­¤è‡³å°‘æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•å®ç°ä¸åŒé¡µé¢é—´çš„é€šä¿¡ï¼š åˆ©ç”¨localStorage 123456789// Aé¡µé¢$('#btn').click(function()&#123; localStorage.setItem('name', 'Jnathan')&#125;)// Bé¡µé¢window.addEventListener('storage', function(event)&#123; console.log(event.key + '=' + event.newValue)&#125;) åˆ©ç”¨cookie + setInterval() 123456789101112// Aé¡µé¢$('#btn').click(function () &#123; document.cookie = \"name=\" + 'Jnathan'&#125;)// Bé¡µé¢function getKey(key) &#123; return JSON.parse(\"&#123;\\\"\"+ document.cookie.replace(/;\\s+/gim,\"\\\",\\\"\").replace(/=/gim, \"\\\":\\\"\") +\"\\\"&#125;\")[key]; &#125;setInterval(function()&#123; console.log('name:', getKey('name'))&#125;, 1000) 15. new æ“ä½œç¬¦çš„å››ä¸ªæ­¥éª¤12var Fn = function() &#123;&#125;var fn = new Fn() åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ 1var obj = new Object() è®¾ç½®objçš„åŸå‹ï¼Œå°†objçš„åŸå‹æŒ‡å‘Fnçš„åŸå‹é“¾ 1obj.__proto__ = Fn.prototype å°†Fnä¸­çš„thisæŒ‡å‘obj,å¹¶æ‰§è¡ŒFn 1var result = Fn.call(obj) åˆ¤æ–­Fnçš„è¿”å›å€¼ç±»å‹ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼›å¦‚æœæ˜¯å€¼ç±»å‹ï¼Œåˆ™è¿”å›obj` 12345if (typeof result == 'object') &#123; // å¼•ç”¨ç±»å‹ fn = result&#125; else &#123; // å€¼ç±»å‹ fn = obj&#125; 16. æ„é€ å‡½æ•°å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹å¼1234567function Animal () &#123; this.species = 'åŠ¨ç‰©'&#125;function Cat (name, color) &#123; this.name = name this.color = color&#125; ä½¿çŒ«ç»§æ‰¿åŠ¨ç‰©ï¼š call apply 12345678function Cat (name, color) &#123; Animal.apply(this, arguments) this.name = name this.color = color&#125;var cat1 = new Cat('name1', 'color1')alert(cat1.species) // åŠ¨ç‰© prototypeï¼ˆå…¶ä¸€ï¼‰ 12345678function Cat (name, color) &#123; Animal.apply(this, arguments) this.name = name this.color = color&#125;var cat1 = new Cat('name1', 'color1')alert(cat1.species) // åŠ¨ç‰© prototypeï¼ˆå…¶äºŒï¼‰ 12345678function Animal () &#123;&#125;Animal.prototype.species = 'åŠ¨ç‰©'Cat.prototype = Animal.prototypeCat.prototype.constructor = Catvar cat3 = new Cat('name3', 'color3')alert(cat3.species) // åŠ¨ç‰© åˆ©ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ ä¸Šé¢é‚£ç§æ–¹æ³•çš„ç¼ºç‚¹ï¼šCat.prototypeå’ŒAnimal.prototypeç°åœ¨æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä»»ä½•å¯¹Cat.prototypeçš„ä¿®æ”¹ï¼Œéƒ½ä¼šåæ˜ åˆ°Animal.prototypeã€‚ 1234var Fn = function () &#123;&#125;Fn.prototype = Animal.prototypeCat.prototype = new Fn()Cat.prototype.construvtor = Cat å°†å…¶å°è£…æˆä¸€ä¸ªå‡½æ•° 12345678910function extend (Child, Parent) &#123; var Fn = function () &#123;&#125; Fn.prototype = Parent.prototype Child.prototype = new Fn() Child.prototype.constructor = Child&#125;extend(Cat, Animal)var cat4 = new Cat('name4', 'color4')alert(cat4.species) // åŠ¨ç‰© æ‹·è´ç»§æ‰¿ 123456789101112131415function Animal () &#123;&#125;Animal.species = 'åŠ¨ç‰©'function extend2 () &#123; var C = Child.prototype var P = Parent.prototype for (var i in P) &#123; C[i] = P[i] &#125;&#125;extend2(Cat, Animal)var cat5 = new Cat('name5', 'color5')alert(cat5.species) // åŠ¨ç‰© 17. éæ„é€ å‡½æ•°çš„ç»§æ‰¿123456var Chinese = &#123; nation: 'ä¸­å›½'&#125;var Doctor = &#123; career: 'åŒ»ç”Ÿ'&#125; æµ…æ‹·è´ 123456789101112function shallowCopy (Parent) &#123; var Child = &#123;&#125; for (var i in Parent) &#123; Child[i] = Parent[i] &#125; return Child&#125;var doctor1 = shallowCopy(Chinese)alert(doctor1.nation) // ä¸­å›½ æ·±æ‹·è´ 1234567891011121314151617function deepCopy (Child, Parent) &#123; var Child = Child || &#123;&#125; for (var i in Parent) &#123; if (typeof Parent[i] == 'object') &#123; Child[i] = (Parent[i].constructor === Array) ? [] : &#123;&#125; deepCopy(Child[i], Parent[i]) &#125; else &#123; Child[i] = Parent[i] &#125; &#125; return Child&#125;var doctor2 = deepCopy(Doctor, Chinese)alert(doctor.nation) // ä¸­å›½ 18. å‚è€ƒé“¾æ¥","comments":true,"tags":[{"name":"dairy","slug":"dairy","permalink":"https://JnathanCoder.github.io/tags/dairy/"}]},{"title":"forEachéå†ä¸­æ–­","date":"2019-05-22T09:28:36.000Z","path":"2019/05/22/forEach-interrupt/","text":"123456789101112131415try &#123; [22, 34, 20, 36, 98].forEach( (value, index, arr) =&gt; &#123; if (value === 20) &#123; console.log('é‡åˆ°20èƒ½å¤Ÿé€€å‡ºå¾ªç¯å—ï¼Ÿ') throw Error('è‡ªå®šä¹‰å¼‚å¸¸æç¤ºè¯­') return // returnå¹¶ä¸èƒ½ä¸­æ–­å¾ªç¯ï¼Œè¿™é‡Œå¯å†™å¯ä¸å†™ &#125; else console.log('å½“å‰éå†å€¼ï¼š', value) &#125;)&#125; catch(err) &#123; console.log(err.message)&#125;// 22// 34// é‡åˆ°20èƒ½å¤Ÿé€€å‡ºå¾ªç¯å—ï¼Ÿ// è‡ªå®šä¹‰å¼‚å¸¸æç¤ºè¯­","comments":true,"tags":[]},{"title":"ä½¿ç”¨ void 0 ä»£æ›¿ undefined","date":"2019-05-22T09:02:31.000Z","path":"2019/05/22/void-0/","text":"Whatâ€¦1void 0 === undefined // true Whyï¼Ÿ é˜²æ­¢undefinedè¢«é‡å†™ åœ¨ES5ä¹‹å‰ï¼Œwindowä¸‹çš„undefinedæ˜¯å¯ä»¥è¢«é‡å†™çš„ï¼Œäºæ˜¯å¯¼è‡´äº†æŸäº›æç«¯æƒ…å†µä¸‹ä½¿ç”¨undefinedä¼šå‡ºç°ä¸€å®šçš„å·®é”™ã€‚ æ‰€ä»¥ï¼Œç”¨void 0æ˜¯ä¸ºäº†é˜²æ­¢undefinedè¢«é‡å†™è€Œå‡ºç°åˆ¤æ–­ä¸å‡†ç¡®çš„æƒ…å†µã€‚ äº‹å®ä¸Šï¼Œvoidçš„è¿”å›å€¼éƒ½æ˜¯undefinedã€‚ES5ä¹‹åçš„æ ‡å‡†ä¸­ï¼Œè§„å®šäº†å…¨å±€å˜é‡ä¸‹çš„undefinedå€¼ä¸ºåªè¯»ï¼Œä¸å¯æ”¹å†™çš„ï¼Œä½†æ˜¯å±€éƒ¨å˜é‡ä¸­ä¾ç„¶å¯ä»¥å¯¹ä¹‹è¿›è¡Œæ”¹å†™ã€‚è¡¥å……ä¸€ä¸‹ï¼šéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œundefinedæ˜¯å¯ä»¥é‡å†™çš„ï¼Œä¸¥æ ¼æ¨¡å¼åˆ™ä¸èƒ½é‡å†™ã€‚ èŠ‚çœå­—èŠ‚ void 0ä»£æ›¿undefinedèŠ‚çœ3ä¸ªå­—èŠ‚ï¼Œç±»ä¼¼çš„è¿˜æœ‰ä»¥ä¸‹ç”¨æ³•ï¼š 1234567891011121314151617181920212223242526272829303132// å–æ•´æ“ä½œparseInt(a,10) // BeforeMath.floor(a) // Beforea&gt;&gt;0 // Before~~a // Aftera|0 // After// å››èˆäº”å…¥æ“ä½œMath.round(a) // Beforea+.5|0 // After// å†…ç½®å€¼undefined // Beforevoid 0 // After, å¿«0[0] // After, ç•¥æ…¢// å†…ç½®å€¼Infinity1/0// å¸ƒå°”å€¼çŸ­å†™æ³•true; // Beforefalse // Before!1 // After!0; // After// è·å–ä¸Šä¸‹æ–‡å¯¹è±¡var global = (function () &#123; return this || (0, eval)('this')&#125;())// (0, eval)('this') ç­‰ä»·äº eval('this') æ­£å¸¸æƒ…å†µä¸‹å¯ä»¥ç›´æ¥ä½¿ç”¨ eval()// éƒ¨åˆ†ä½ç‰ˆæœ¬IEä¸‹ï¼Œä¸å¯ä»¥ç›´æ¥è¿è¡Œeval()ã€‚","comments":true,"tags":[]},{"title":"this + bind + call + apply","date":"2019-05-21T07:05:59.000Z","path":"2019/05/21/this/","text":"thisçš„æŒ‡å‘ thisçš„æŒ‡å‘æ€»ç»“èµ·æ¥å°±æ˜¯thisæ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡ ä¾‹1ï¼š 123456789var name = 'global'function test() &#123; var name = 'cherry' console.log(this) console.log(this.name)&#125;test()// window// global è°ƒç”¨ test æ–¹æ³•çš„åœ°æ–¹æ˜¯ test() ï¼Œå‰é¢æ²¡æœ‰è°ƒç”¨çš„å¯¹è±¡å³ä¸º window ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º undefined ï¼‰ï¼Œç›¸å½“äº window.test() ã€‚ ä¾‹2ï¼š 123456789var name = 'global'var obj = &#123; name: 'cherry', fn: function () &#123; console.log(this.name) &#125;&#125;obj.fn() // cherrywindow.obj.fn() // cherry obj.fn() å–ç”¨çš„æ˜¯ obj å¯¹è±¡ é‡Œé¢çš„ name å€¼ï¼Œ window.obj.fn() é‡Œé¢ï¼Œæœ€åè°ƒç”¨çš„æ˜¯ obj å¯¹è±¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ cherry ã€‚è¡¥å……ï¼šå‡å¦‚å°† obj å¯¹è±¡ä¸­ name å±æ€§çš„å®šä¹‰æ³¨é‡Šæ‰ï¼Œé‚£ä¹ˆ obj.fn() å°†ä¼šæ‰“å°å‡º undefined ï¼Œå› ä¸ºåªä¼šçœ‹æœ€è¿‘çš„è°ƒç”¨ obj å¯¹è±¡ ï¼Œå½“æ²¡æœ‰å®šä¹‰æ—¶ï¼Œä¸ä¼šç»§ç»­å‘ä¸Šä¸€ä¸ªå¯¹è±¡ window å¯»æ‰¾ name å±æ€§ã€‚ ä¾‹3ï¼š 123456789var name = 'global'var obj = &#123; name: 'cherry', fn: function () &#123; console.log(this.name) &#125;&#125;var temp = obj.fn()temp() // global å†æ¥çœ‹ä¸€éï¼šthis æ°¸è¿œæŒ‡å‘ æœ€åè°ƒç”¨ å®ƒçš„é‚£ä¸ªå¯¹è±¡ã€‚ obj.fn() èµ‹å€¼ç»™ temp æ—¶ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œèµ‹å€¼ï¼æœ€å temp() è°ƒç”¨çš„æ—¶å€™æ˜¯ window.temp() ï¼Œæ‰€ä»¥æ‰“å° global ã€‚ ä¾‹4ï¼š 123456789var name = 'global'function fn () &#123; var name = 'cherry' innerFn() function innerFn () &#123; console.log(this.name) &#125;&#125;fn() // global ä¾‹5ï¼š 1234567891011121314151617181920function Func () &#123; this.name = 'cherry'&#125;var fn = new Func()console.log(fn.name) // cherry// =================================function Func2 () &#123; this.name = 'cherry' return &#123;name: 'apple'&#125; // è¿”å›ä¸€ä¸ªå¯¹è±¡ å¦‚æœnameæ”¹ä¸ºname2ï¼Œfn2.nameä¸ºundefined&#125;function Func3 () &#123; this.name = 'cherry' return true // è¿”å›trueï¼Œéå¯¹è±¡ï¼ˆfalse, 124, 'abc'éƒ½å¯ï¼‰&#125;var fn2 = new Func2()console.log(fn2.name) // applevar fn3 = new Func3()console.log(fn3.name) // cherry å½“æˆ‘ä»¬é€šè¿‡ new å…³é”®å­—æ„é€ ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œæ„é€ å‡½æ•°ä¸­çš„ this ä¸€èˆ¬æƒ…å†µä¸‹æŒ‡å‘æˆ‘ä»¬æ„é€ å‡ºæ¥çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œå› æ­¤åœ¨æ„é€ è¿‡ç¨‹ä¸­ this.name = &#39;cherry&#39; è¿™å¥ä»£ç å°±ç›¸å½“äºç»™å®ä¾‹å¯¹è±¡ fn åˆ›å»ºäº†ä¸€ä¸ª name å±æ€§å¹¶èµ‹å€¼ cherry ã€‚ç‰¹åˆ«çš„ï¼Œå½“æ„é€ å‡½æ•°ä¸­çš„ this é‡åˆ° return çš„æƒ…å†µã€‚å½“æ„é€ å‡½æ•°ä¸­è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œthis æŒ‡å‘çš„å°±æ˜¯è¿”å›çš„é‚£ä¸ªå¯¹è±¡ï¼›å¦‚æœè¿”å›å€¼ä¸æ˜¯å¯¹è±¡æ—¶ï¼Œthis æŒ‡å‘çš„å°±æ˜¯æ„é€ å‡½æ•°ï¼ˆè¿™é‡Œæ˜¯ Func3 ï¼‰ã€‚ æ”¹å˜thisçš„æŒ‡å‘ä¾‹6ï¼š 12345678910111213var name = 'global'var obj = &#123; name: 'cherry', fn1: function () &#123; console.log(this.name) &#125;, fn2: function () &#123; setTimeout(function () &#123; this.fn1() &#125;, 1000) &#125;&#125;obj.fn2() // this.fn1 is not a function setTimeout() å³ä¸º window.setTimeout() ï¼Œæœ€åè°ƒç”¨çš„å¯¹è±¡æ˜¯ windowï¼Œè€Œ window ä¸­å¹¶æ²¡æœ‰æ–¹æ³• fn1() ï¼Œæ•…è€ŒæŠ¥é”™ã€‚ æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ³•æ”¹å˜thisçš„æŒ‡å‘é—®é¢˜ï¼š var _this = this 12345678// ...fn2: function () &#123; var _this = this setTimeout(function () &#123; _this.fn1() // cherry &#125;, 1000)&#125;// ... ç®­å¤´å‡½æ•° 1234567// ...fn2: function () &#123; setTimeout( () =&gt; &#123; this.fn1() // cherry &#125;, 1000)&#125;// ... bind 1234567// ...fn2: function () &#123; setTimeout(function () &#123; this.fn1() // cherry &#125;. bind(obj)(), 1000) // è¿™é‡Œçš„objä¹Ÿå¯ä»¥æ¢æˆthis thisæŒ‡å‘obj&#125;// ... call 1234567// ...fn2: function () &#123; setTimeout(function () &#123; this.fn1() // cherry &#125;.call(obj), 1000) // è¿™é‡Œçš„objä¹Ÿå¯ä»¥æ¢æˆthis thisæŒ‡å‘obj&#125;// ... apply 1234567// ...fn2: function () &#123; setTimeout(function () &#123; this.fn1() // cherry &#125;.apply(obj), 1000) // è¿™é‡Œçš„objä¹Ÿå¯ä»¥æ¢æˆthis thisæŒ‡å‘obj&#125;// ... bindä»‹ç» bind() æ–¹æ³•åˆ›å»ºä¸€ä¸ª æ–°çš„å‡½æ•°ï¼Œ å½“è¢«è°ƒç”¨æ—¶ï¼Œå°†å…¶ this å…³é”®å­—è®¾ç½®ä¸ºæä¾›çš„å€¼ã€‚åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œåœ¨ä»»ä½•æä¾›ä¹‹å‰æä¾›ä¸€ä¸ªç»™å®šçš„å‚æ•°åºåˆ—ã€‚ ä¾‹7ï¼š 123456789var obj = &#123; func: function (a, b) &#123; console.log('ä¹˜ç§¯ï¼š ' + a * b) &#125;&#125;obj.func.bind(obj, 2, 8) // f (a, b) &#123; // console.log('ä¹˜ç§¯ï¼š ' + a * b) // &#125;obj.func.bind(obj, 2, 8)() // ä¹˜ç§¯ï¼š 16 å› ä¸º bind åªä¼šé‡æ–°èµ‹äºˆ thisï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œéœ€è¦æ‰‹åŠ¨æ‰§è¡Œï¼Œå›ºæœ‰ç¬¬äºŒä¸ªçš„ç»“æœã€‚ callä»‹ç» functionObj.call(thisArg[, args1, args2, args3, â€¦]) thisArg -&gt; å‡½æ•°åœ¨è¿è¡Œæ—¶æŒ‡å®šçš„ this ã€‚å½“ä¸º null æˆ–è€… undefined æ—¶ï¼Œè‡ªåŠ¨æŒ‡å‘ window ã€‚å½“ä¸ºstring ã€number ã€boolean ç±»å‹çš„æ—¶å€™ï¼Œthis æŒ‡å‘å„è‡ªçš„åŒ…è£…å¯¹è±¡ã€‚ 123456789101112function test () &#123; console.log('this: ' + this)&#125;test.call(null) // windowtest.call(undefined) // windowtest.call('abcd') // Stringtest.call(128) // Numbertest.call(false) // Boolean// apply() çš„ç»“æœä¸ call() ä¸€è‡´test.apply(null) // window// ... ä¾‹8ï¼š 1234567var obj = &#123; name: 'hello', func: function (a, b) &#123; console.log('ä¹˜ç§¯ï¼š ' + a * b) &#125;&#125;obj.func.call(obj, 2, 5) // ä¹˜ç§¯ï¼š 10 applyä»‹ç» functionObj.apply(thisArg[, argsArr]) apply çš„è¯­æ³•å’Œ call çš„è¯­æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº apply çš„å‚æ•°åˆ—è¡¨æ˜¯ä»¥ æ•°ç»„ æˆ–è€… ç±»æ•°ç»„ å½¢å¼ä¼ å…¥ã€‚ ä¾‹9ï¼š 1234567var obj = &#123; name: 'hello', func: function (a, b) &#123; console.log('ä¹˜ç§¯ï¼š ' + a * b) &#125;&#125;obj.func.apply(obj, [2, 6]) // ä¹˜ç§¯ï¼š 12 callã€applyå¸¸è§ç”¨æ³• å°†ç±»æ•°ç»„ ArrayLike è½¬æ¢æˆæ•°ç»„ Array 12345678910111213141516var arraylike = &#123;'1': 'hello', '2': 'world', '3': 'balabala', length: 4&#125;function ArrTransfer () &#123; // return [].slice.call(arguments) return Array.prototype.slice.call(arguments) // return [].splice.call(arguments, 0) // return Array.prototype.splice.call(arguments, 0) // return Array.from(arguments)&#125;var list = ArrTransfer(arrayLike) // [&#123;'1': 'hello', '2': 'world', '3': 'balabala', length: 3&#125;]Array.prototype.slice.call(arrayLike).forEach( (elem, index) =&gt; &#123; console.log(elem, index) // hello 1 // world 2 // balabala 3&#125;) æ±‚æœ€å¤§æœ€å°å€¼ 123var arr = [21, 2, 35, 9, 23, 16, 29]Math.max.apply(Math, arr) // 35Math.min.apply(Math, arr) // 2 Useful Link å…¨æ–‡å‚è€ƒè‡ªæ˜é‡‘æ–‡ç« ","comments":true,"tags":[{"name":"this","slug":"this","permalink":"https://JnathanCoder.github.io/tags/this/"},{"name":"ä½œç”¨åŸŸ","slug":"ä½œç”¨åŸŸ","permalink":"https://JnathanCoder.github.io/tags/ä½œç”¨åŸŸ/"}]},{"title":"ä¼ä¸šå¾®ä¿¡ä¸­è¶…é“¾æ¥åœ°å€è·³è½¬","date":"2019-05-21T03:04:11.000Z","path":"2019/05/21/wxwork-link-unRirect/","text":"é—®é¢˜æè¿°ï¼šåœ¨ios(ç‰ˆæœ¬å·æœªæµ‹è¯•)ä¼ä¸šå¾®ä¿¡(ç‰ˆæœ¬å·æœªæµ‹è¯•)ä¸­ï¼Œå¹¶ä¸”è¶…é“¾æ¥targetå±æ€§æ˜¯_blankæ—¶ï¼Œç‚¹å‡»è¶…é“¾æ¥ä¸èƒ½æ­£å¸¸è·³è½¬ï¼Œå½“å‰é¡µé¢è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ã€‚è€Œåœ¨ioså¾®ä¿¡æµè§ˆå™¨ä»¥åŠandroidä¸­æœªå¤ç°ã€‚ è§£å†³åŠæ³• ç›´æ¥ä¿®æ”¹targetå±æ€§å€¼ä¸ºé_blankå³å¯ï¼› å¦‚æœæ˜¯ä»å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­å‡ºæ¥çš„htmlå†…å®¹ï¼Œå¯ä»¥å€ŸåŠ©jsè¿›è¡Œå¤„ç†ã€‚ç¤ºæ„ä»£ç å¦‚ä¸‹ï¼š 1234let oAList = document.querySelectorAll('a')Array.from(oAList).forEach( (aLink, index) =&gt; &#123; aLink.getAttribute('target') === '_blank' ? aLink.setAttribute('target', '_self') : null // è®¾ç½®æˆnullä¹Ÿå¯&#125;)","comments":true,"tags":[{"name":"ä¼å¾®","slug":"ä¼å¾®","permalink":"https://JnathanCoder.github.io/tags/ä¼å¾®/"},{"name":"è¶…é“¾æ¥","slug":"è¶…é“¾æ¥","permalink":"https://JnathanCoder.github.io/tags/è¶…é“¾æ¥/"}]},{"title":"CSSæ–‡æœ¬è¶…å‡ºå®¹å™¨å®½åº¦ä½¿ç”¨çœç•¥å·ä»£æ›¿ï¼ˆä¸è€ƒè™‘jsæ–¹æ³•ï¼‰","date":"2019-03-31T16:00:00.000Z","path":"2019/04/01/text-overflow-ellipsis/","text":"æ–¹æ³•ä¸€ ï¼šå¸¸è§„æ–¹æ³•ï¼ˆé€‚ç”¨äºwebkitå†…æ ¸æµè§ˆå™¨ï¼‰12&lt;div class=\"container text-ellipsis\"&gt;å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å•è¡Œæ–‡å­—è¶…å‡ºçœç•¥å·&lt;/div&gt;&lt;div class=\"container text-ellipsis-multi\"&gt;å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·&lt;/div&gt; 1234567891011121314151617181920.container &#123; display: inline-block; width: 333px; height: 60px; font-size: 16px; border: 1px solid #00bebe;&#125;.text-ellipsis &#123; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;&#125;.text-ellipsis-multi &#123; line-height: 20px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 3; // æ§åˆ¶æ˜¾ç¤ºçš„è¡Œæ•° -webkit-box-orient: vertical;&#125; åœ¨webkitæµè§ˆå™¨ä¸­çš„è¡¨ç°ï¼š æ–¹æ³•äºŒï¼šåˆ©ç”¨ä¼ªç±»+floatï¼ˆé€‚ç”¨äºå¤§éƒ¨åˆ†æµè§ˆå™¨ï¼‰åŸç†è®²è§£å‚è€ƒè¿™é‡Œ 123&lt;div class=\"wrap\"&gt; &lt;div class=\"text\"&gt;å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·å¤šè¡Œæ–‡å­—è¶…å‡ºçœç•¥å·&lt;/div&gt;&lt;/div&gt; 123456789101112131415161718192021222324252627282930.wrap &#123; background: #099; max-height: 40px; line-height: 20px; overflow: hidden;&#125;.wrap:before &#123; float: left; content: ''; width: 20px; height: 40px;&#125;.wrap .text &#123; float: right; width: 100%; margin-left: -20px; word-break: break-all;&#125;.wrap:after &#123; float: right; content: '...'; width: 20px; height: 20px; &lt;!-- ä¸‹æ–¹ä¸‰è¡Œä»£ç  è°ƒæ•´çœç•¥å·ä½ç½® --&gt; &lt;!-- æœªè¶…å‡ºæ—¶ï¼Œçœç•¥å·åœ¨wrapå¤–é¢ï¼Œè¢«éšè— --&gt; position: relative; left: 100%; transform: translate(-100%, -100%);&#125; åœ¨éwebkitå†…æ ¸æµè§ˆå™¨ä¸­çš„è¡¨ç°ï¼š å¯ä»¥çœ‹åˆ°æ•ˆæœè¿˜æ˜¯ä¸é‚£ä¹ˆå°½äººæ„ï¼Œå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå†æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ç›¸åº”ä»£ç ï¼Œæ¯”å¦‚...ç”¨æ¸å˜è‰²ä»£æ›¿ç°åœ¨çš„ç™½è‰²ï¼Œä¼šæ˜¾å¾—å¹³æ»‘ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥æ­é…jsè¿›ä¸€æ­¥å¤„ç†ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œã€‚ ä¹Ÿå¯ä½¿ç”¨å°è£…å¥½çš„ vueç»„ä»¶ ã€‚ æ›´è¯¦ç»†çš„æ–‡ç« å‚è€ƒè¿™é‡Œã€‚","comments":true,"tags":[{"name":"ellipsis","slug":"ellipsis","permalink":"https://JnathanCoder.github.io/tags/ellipsis/"},{"name":"æ¢è¡Œ","slug":"æ¢è¡Œ","permalink":"https://JnathanCoder.github.io/tags/æ¢è¡Œ/"},{"name":"çœç•¥å·","slug":"çœç•¥å·","permalink":"https://JnathanCoder.github.io/tags/çœç•¥å·/"}]}]